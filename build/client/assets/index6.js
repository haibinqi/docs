import{r as s,j as E,P as S}from"./jsx-runtime.js";import{c as N,u as P}from"./index3.js";import{a as _,u as g}from"./utils.js";function v(e){const t=z(e),n=s.forwardRef((r,o)=>{const{children:i,...c}=r,l=s.Children.toArray(i),a=l.find(j);if(a){const f=a.props.children,x=l.map(R=>R===a?s.Children.count(f)>1?s.Children.only(null):s.isValidElement(f)?f.props.children:null:R);return E.jsx(t,{...c,ref:o,children:s.isValidElement(f)?s.cloneElement(f,void 0,x):null})}return E.jsx(t,{...c,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function z(e){const t=s.forwardRef((n,r)=>{const{children:o,...i}=n;if(s.isValidElement(o)){const c=D(o),l=w(i,o.props);return o.type!==s.Fragment&&(l.ref=r?_(r,c):c),s.cloneElement(o,l)}return s.Children.count(o)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var T=Symbol("radix.slottable");function j(e){return s.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===T}function w(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...l)=>{const a=i(...l);return o(...l),a}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function D(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function H(e){const t=e+"CollectionProvider",[n,r]=N(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=m=>{const{scope:u,children:y}=m,d=S.useRef(null),p=S.useRef(new Map).current;return E.jsx(o,{scope:u,itemMap:p,collectionRef:d,children:y})};c.displayName=t;const l=e+"CollectionSlot",a=v(l),f=S.forwardRef((m,u)=>{const{scope:y,children:d}=m,p=i(l,y),C=g(u,p.collectionRef);return E.jsx(a,{ref:C,children:d})});f.displayName=l;const x=e+"CollectionItemSlot",R="data-radix-collection-item",A=v(x),b=S.forwardRef((m,u)=>{const{scope:y,children:d,...p}=m,C=S.useRef(null),I=g(u,C),h=i(x,y);return S.useEffect(()=>(h.itemMap.set(C,{ref:C,...p}),()=>void h.itemMap.delete(C))),E.jsx(A,{[R]:"",ref:I,children:d})});b.displayName=x;function O(m){const u=i(e+"CollectionConsumer",m);return S.useCallback(()=>{const d=u.collectionRef.current;if(!d)return[];const p=Array.from(d.querySelectorAll(`[${R}]`));return Array.from(u.itemMap.values()).sort((h,M)=>p.indexOf(h.ref.current)-p.indexOf(M.ref.current))},[u.collectionRef,u.itemMap])}return[{Provider:c,Slot:f,ItemSlot:b},O,r]}var L=s.createContext(void 0);function $(e){const t=s.useContext(L);return e||t||"ltr"}function k(e){const[t,n]=s.useState(void 0);return P(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let c,l;if("borderBoxSize"in i){const a=i.borderBoxSize,f=Array.isArray(a)?a[0]:a;c=f.inlineSize,l=f.blockSize}else c=e.offsetWidth,l=e.offsetHeight;n({width:c,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}export{k as a,H as c,$ as u};
