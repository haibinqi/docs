import{r,j as e}from"./jsx-runtime-BDw8OB7t.js";import{a as R,B as I}from"./button-BF-7J69j.js";import{S as E,i as F,j as G,k as T,l as c,T as M}from"./select-Df6w1pt1.js";import{L as m,I as P}from"./label-BvVeiCgh.js";import{c as d}from"./utils-CDN07tui.js";import{t as z,v as D}from"./components-uY1RQYdm.js";import{c as o}from"./createLucideIcon-3FgSs6nL.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],V=o("key",L);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],q=o("loader-circle",$);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],H=o("send",B);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],w=o("sparkles",J);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Q=o("triangle-alert",O),x=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a}));x.displayName="Card";const p=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",s),...a}));p.displayName="CardHeader";const h=r.forwardRef(({className:s,...a},t)=>e.jsx("h3",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",s),...a}));h.displayName="CardTitle";const b=r.forwardRef(({className:s,...a},t)=>e.jsx("p",{ref:t,className:d("text-sm text-muted-foreground",s),...a}));b.displayName="CardDescription";const g=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:d("p-6 pt-0",s),...a}));g.displayName="CardContent";const U=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:d("flex items-center p-6 pt-0",s),...a}));U.displayName="CardFooter";const W=R("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),k=r.forwardRef(({className:s,variant:a,...t},n)=>e.jsx("div",{ref:n,role:"alert",className:d(W({variant:a}),s),...t}));k.displayName="Alert";const C=r.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:d("mb-1 font-medium leading-none tracking-tight",s),...a}));C.displayName="AlertTitle";const K=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:d("text-sm [&_p]:leading-relaxed",s),...a}));K.displayName="AlertDescription";function re(){var y,N;const{hasEnvKey:s}=z(),a=D(),[t,n]=r.useState("");r.useEffect(()=>{const l=localStorage.getItem("gemini_api_key");l&&n(l)},[]);const S=l=>{const i=l.target.value;n(i),localStorage.setItem("gemini_api_key",i)},[u,_]=r.useState("gemini-1.5-pro"),[f,A]=r.useState(""),j=a.state==="submitting",v=r.useRef(null);return r.useEffect(()=>{var l,i;(l=a.data)!=null&&l.response&&((i=v.current)==null||i.scrollIntoView({behavior:"smooth"}))},[a.data]),e.jsxs("div",{className:"flex flex-col gap-6 p-6 max-w-4xl mx-auto min-h-[calc(100vh-4rem)]",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(w,{className:"h-8 w-8 text-yellow-500"}),"Gemini 智能对话"]}),e.jsx("p",{className:"text-muted-foreground",children:"直接与 Google Gemini 大模型进行对话，探索无限创意"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(h,{children:"配置"}),e.jsx(b,{children:"设置 API 密钥和模型参数"})]}),e.jsxs(g,{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"model",children:"模型选择"}),e.jsxs(E,{value:u,onValueChange:_,children:[e.jsx(F,{id:"model",children:e.jsx(G,{placeholder:"Select model"})}),e.jsxs(T,{children:[e.jsx(c,{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro (推荐)"}),e.jsx(c,{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash (快速)"}),e.jsx(c,{value:"gemini-pro",children:"Gemini 1.0 Pro"})]})]})]}),!s&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"apiKey",children:"API Key (未设置环境变量)"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(P,{id:"apiKey",type:"password",placeholder:"输入 Google AI Studio Key",className:"pl-9",value:t,onChange:S})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Key将保存在本地浏览器中。"})]}),s&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{children:"API Key"}),e.jsx("div",{className:"flex items-center h-10 px-3 rounded-md border bg-muted text-muted-foreground text-sm",children:"Configured in Environment"})]})]})]}),e.jsx("div",{className:"relative",children:e.jsxs(a.Form,{method:"post",className:"grid gap-4",children:[e.jsx("input",{type:"hidden",name:"apiKey",value:t}),e.jsx("input",{type:"hidden",name:"model",value:u}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{name:"prompt",placeholder:"输入您的问题、创意或需求...",className:"min-h-[150px] p-4 text-base resize-y shadow-sm font-mono",value:f,onChange:l=>A(l.target.value),onKeyDown:l=>{l.key==="Enter"&&(l.metaKey||l.ctrlKey)&&a.submit(l.currentTarget.form)}}),e.jsx("div",{className:"absolute bottom-3 right-3 text-xs text-muted-foreground",children:"Cmd/Ctrl + Enter 发送"})]}),e.jsx(I,{type:"submit",size:"lg",disabled:!f.trim()||j||!s&&!t,className:"w-full md:w-auto md:ml-auto gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-4 w-4 animate-spin"}),"思考中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"h-4 w-4"}),"发送消息"]})})]})}),((y=a.data)==null?void 0:y.error)&&e.jsxs(k,{variant:"destructive",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx(C,{children:"Error"}),e.jsx(K,{children:a.data.error})]}),((N=a.data)==null?void 0:N.response)&&e.jsxs(x,{className:"bg-muted/30 border-primary/20",ref:v,children:[e.jsx(p,{children:e.jsxs(h,{className:"text-lg flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5 text-primary"}),"Gemini 的回答"]})}),e.jsx(g,{children:e.jsx("div",{className:"prose prose-sm md:prose-base dark:prose-invert max-w-none whitespace-pre-wrap leading-relaxed",children:a.data.response})})]})]})]})}export{re as default};
