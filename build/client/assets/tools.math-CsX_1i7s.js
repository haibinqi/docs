import{r as n,j as e}from"./jsx-runtime-BDw8OB7t.js";import{c as ge,B as V}from"./button-DzWdpVie.js";import{b as P,u as A}from"./utils-BafzuVJE.js";import{c as q,P as K,a as w,u as U,b as M,d as H,C as _e,e as X,f as je,R as Ne,I as ye,D as ke,g as Re}from"./react-icons.esm-hryL2ptm.js";import{c as Ce}from"./createLucideIcon-3FgSs6nL.js";import"./index-u55fAOmI.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ie=Ce("printer",we),D=n.forwardRef(({className:t,type:a,...s},d)=>e.jsx("input",{type:a,className:P("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:d,...s}));D.displayName="Input";const Ee=ge("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=n.forwardRef(({className:t,...a},s)=>e.jsx("label",{ref:s,className:P(Ee(),t),...a}));R.displayName="Label";function W(t){const a=n.useRef({value:t,previous:t});return n.useMemo(()=>(a.current.value!==t&&(a.current.previous=a.current.value,a.current.value=t),a.current.previous),[t])}var B="Checkbox",[Pe]=q(B),[Se,T]=Pe(B);function Me(t){const{__scopeCheckbox:a,checked:s,children:d,defaultChecked:i,disabled:o,form:l,name:f,onCheckedChange:c,required:v,value:h="on",internal_do_not_use_render:p}=t,[b,m]=U({prop:s,defaultProp:i??!1,onChange:c,caller:B}),[x,_]=n.useState(null),[r,u]=n.useState(null),g=n.useRef(!1),I=x?!!l||!!x.closest("form"):!0,k={checked:b,disabled:o,setChecked:m,control:x,setControl:_,name:f,form:l,value:h,hasConsumerStoppedPropagationRef:g,required:v,defaultChecked:C(i)?!1:i,isFormControl:I,bubbleInput:r,setBubbleInput:u};return e.jsx(Se,{scope:a,...k,children:Ae(p)?p(k):d})}var Y="CheckboxTrigger",J=n.forwardRef(({__scopeCheckbox:t,onKeyDown:a,onClick:s,...d},i)=>{const{control:o,value:l,disabled:f,checked:c,required:v,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:b,isFormControl:m,bubbleInput:x}=T(Y,t),_=A(i,h),r=n.useRef(c);return n.useEffect(()=>{const u=o==null?void 0:o.form;if(u){const g=()=>p(r.current);return u.addEventListener("reset",g),()=>u.removeEventListener("reset",g)}},[o,p]),e.jsx(w.button,{type:"button",role:"checkbox","aria-checked":C(c)?"mixed":c,"aria-required":v,"data-state":re(c),"data-disabled":f?"":void 0,disabled:f,value:l,...d,ref:_,onKeyDown:M(a,u=>{u.key==="Enter"&&u.preventDefault()}),onClick:M(s,u=>{p(g=>C(g)?!0:!g),x&&m&&(b.current=u.isPropagationStopped(),b.current||u.stopPropagation())})})});J.displayName=Y;var z=n.forwardRef((t,a)=>{const{__scopeCheckbox:s,name:d,checked:i,defaultChecked:o,required:l,disabled:f,value:c,onCheckedChange:v,form:h,...p}=t;return e.jsx(Me,{__scopeCheckbox:s,checked:i,defaultChecked:o,disabled:f,required:l,onCheckedChange:v,name:d,form:h,value:c,internal_do_not_use_render:({isFormControl:b})=>e.jsxs(e.Fragment,{children:[e.jsx(J,{...p,ref:a,__scopeCheckbox:s}),b&&e.jsx(te,{__scopeCheckbox:s})]})})});z.displayName=B;var Q="CheckboxIndicator",Z=n.forwardRef((t,a)=>{const{__scopeCheckbox:s,forceMount:d,...i}=t,o=T(Q,s);return e.jsx(K,{present:d||C(o.checked)||o.checked===!0,children:e.jsx(w.span,{"data-state":re(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:a,style:{pointerEvents:"none",...t.style}})})});Z.displayName=Q;var ee="CheckboxBubbleInput",te=n.forwardRef(({__scopeCheckbox:t,...a},s)=>{const{control:d,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:l,required:f,disabled:c,name:v,value:h,form:p,bubbleInput:b,setBubbleInput:m}=T(ee,t),x=A(s,m),_=W(o),r=H(d);n.useEffect(()=>{const g=b;if(!g)return;const I=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(I,"checked").set,N=!i.current;if(_!==o&&j){const y=new Event("click",{bubbles:N});g.indeterminate=C(o),j.call(g,C(o)?!1:o),g.dispatchEvent(y)}},[b,_,o,i]);const u=n.useRef(C(o)?!1:o);return e.jsx(w.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??u.current,required:f,disabled:c,name:v,value:h,form:p,...a,tabIndex:-1,ref:x,style:{...a.style,...r,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});te.displayName=ee;function Ae(t){return typeof t=="function"}function C(t){return t==="indeterminate"}function re(t){return C(t)?"indeterminate":t?"checked":"unchecked"}const se=n.forwardRef(({className:t,...a},s)=>e.jsx(z,{ref:s,className:P("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:e.jsx(Z,{className:P("grid place-content-center text-current"),children:e.jsx(_e,{className:"h-4 w-4"})})}));se.displayName=z.displayName;var $="Radio",[Ge,ae]=q($),[Fe,De]=Ge($),oe=n.forwardRef((t,a)=>{const{__scopeRadio:s,name:d,checked:i=!1,required:o,disabled:l,value:f="on",onCheck:c,form:v,...h}=t,[p,b]=n.useState(null),m=A(a,r=>b(r)),x=n.useRef(!1),_=p?v||!!p.closest("form"):!0;return e.jsxs(Fe,{scope:s,checked:i,disabled:l,children:[e.jsx(w.button,{type:"button",role:"radio","aria-checked":i,"data-state":de(i),"data-disabled":l?"":void 0,disabled:l,value:f,...h,ref:m,onClick:M(t.onClick,r=>{i||c==null||c(),_&&(x.current=r.isPropagationStopped(),x.current||r.stopPropagation())})}),_&&e.jsx(ce,{control:p,bubbles:!x.current,name:d,value:f,checked:i,required:o,disabled:l,form:v,style:{transform:"translateX(-100%)"}})]})});oe.displayName=$;var ne="RadioIndicator",ie=n.forwardRef((t,a)=>{const{__scopeRadio:s,forceMount:d,...i}=t,o=De(ne,s);return e.jsx(K,{present:d||o.checked,children:e.jsx(w.span,{"data-state":de(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:a})})});ie.displayName=ne;var Be="RadioBubbleInput",ce=n.forwardRef(({__scopeRadio:t,control:a,checked:s,bubbles:d=!0,...i},o)=>{const l=n.useRef(null),f=A(l,o),c=W(s),v=H(a);return n.useEffect(()=>{const h=l.current;if(!h)return;const p=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==s&&m){const x=new Event("click",{bubbles:d});m.call(h,s),h.dispatchEvent(x)}},[c,s,d]),e.jsx(w.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:f,style:{...i.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ce.displayName=Be;function de(t){return t?"checked":"unchecked"}var Oe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],O="RadioGroup",[Le]=q(O,[X,ae]),le=X(),ue=ae(),[qe,Te]=Le(O),pe=n.forwardRef((t,a)=>{const{__scopeRadioGroup:s,name:d,defaultValue:i,value:o,required:l=!1,disabled:f=!1,orientation:c,dir:v,loop:h=!0,onValueChange:p,...b}=t,m=le(s),x=je(v),[_,r]=U({prop:o,defaultProp:i??null,onChange:p,caller:O});return e.jsx(qe,{scope:s,name:d,required:l,disabled:f,value:_,onValueChange:r,children:e.jsx(Ne,{asChild:!0,...m,orientation:c,dir:x,loop:h,children:e.jsx(w.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":f?"":void 0,dir:x,...b,ref:a})})})});pe.displayName=O;var me="RadioGroupItem",he=n.forwardRef((t,a)=>{const{__scopeRadioGroup:s,disabled:d,...i}=t,o=Te(me,s),l=o.disabled||d,f=le(s),c=ue(s),v=n.useRef(null),h=A(a,v),p=o.value===i.value,b=n.useRef(!1);return n.useEffect(()=>{const m=_=>{Oe.includes(_.key)&&(b.current=!0)},x=()=>b.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",x)}},[]),e.jsx(ye,{asChild:!0,...f,focusable:!l,active:p,children:e.jsx(oe,{disabled:l,required:o.required,checked:p,...c,...i,name:o.name,ref:h,onCheck:()=>o.onValueChange(i.value),onKeyDown:M(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:M(i.onFocus,()=>{var m;b.current&&((m=v.current)==null||m.click())})})})});he.displayName=me;var ze="RadioGroupIndicator",xe=n.forwardRef((t,a)=>{const{__scopeRadioGroup:s,...d}=t,i=ue(s);return e.jsx(ie,{...i,...d,ref:a})});xe.displayName=ze;var fe=pe,be=he,$e=xe;const ve=n.forwardRef(({className:t,...a},s)=>e.jsx(fe,{className:P("grid gap-2",t),...a,ref:s}));ve.displayName=fe.displayName;const L=n.forwardRef(({className:t,...a},s)=>e.jsx(be,{ref:s,className:P("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:e.jsx($e,{className:"flex items-center justify-center",children:e.jsx(ke,{className:"h-3.5 w-3.5 fill-primary"})})}));L.displayName=be.displayName;function Ye(){const[t,a]=n.useState("1-9999"),[s,d]=n.useState("1-9999"),[i,o]=n.useState(30),[l,f]=n.useState([]),[c,v]=n.useState(["+"]),[h,p]=n.useState("horizontal"),b=r=>{v(u=>u.includes(r)?u.filter(g=>g!==r):[...u,r])},m=()=>{if(c.length===0)return;const r=k=>{const j=k.split("-").map(N=>parseInt(N.trim(),10));return j.length===1?{min:1,max:j[0]||100}:{min:j[0]||1,max:j[1]||100}},u=r(t),g=r(s),I=[];for(let k=0;k<i;k++){const j=c[Math.floor(Math.random()*c.length)];let N=Math.floor(Math.random()*(u.max-u.min+1))+u.min,y=Math.floor(Math.random()*(g.max-g.min+1))+g.min,G=N,F=y;switch(j){case"-":G=Math.max(N,y),F=Math.min(N,y);break;case"/":y===0&&(y=1);let E=Math.max(N,y),S=Math.min(N,y);S===0&&(S=1),E=E-E%S,E===0&&u.max>0&&(E=S),G=E,F=S;break;default:G=N,F=y}I.push({num1:G,num2:F,operator:j})}f(I)},x=()=>{window.print()},_=r=>{switch(r){case"*":return"×";case"/":return"÷";default:return r}};return e.jsxs("div",{className:"space-y-6 text-[13px]",children:[e.jsxs("div",{className:"print:hidden space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-[16px] font-bold tracking-tight flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5 text-primary"}),"小学生口算生成器，自定义生成加减乘除口算题，支持竖式和横式。"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(V,{onClick:m,size:"sm",className:"h-8 px-4 text-[13px]",disabled:c.length===0,children:"生成试卷"}),e.jsxs(V,{variant:"outline",onClick:x,size:"sm",className:"h-8 px-4 text-[13px]",children:[e.jsx(Ie,{className:"mr-2 h-3.5 w-3.5"})," 打印A4"]})]})]})}),e.jsx("div",{className:"bg-muted/30 p-4 rounded-lg border space-y-4",children:e.jsxs("div",{className:"flex flex-wrap items-end gap-x-8 gap-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(R,{htmlFor:"range1",className:"text-xs text-muted-foreground",children:"数字1范围"}),e.jsx(D,{id:"range1",className:"w-24 h-8 text-[13px]",value:t,onChange:r=>a(r.target.value),placeholder:"1-100"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(R,{htmlFor:"range2",className:"text-xs text-muted-foreground",children:"数字2范围"}),e.jsx(D,{id:"range2",className:"w-24 h-8 text-[13px]",value:s,onChange:r=>d(r.target.value),placeholder:"1-100"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(R,{htmlFor:"count",className:"text-xs text-muted-foreground",children:"数量"}),e.jsx(D,{id:"count",type:"number",className:"w-16 h-8 text-[13px]",value:i,onChange:r=>o(parseInt(r.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs text-muted-foreground",children:"符号"}),e.jsx("div",{className:"flex gap-3 items-center h-8",children:["+","-","*","/"].map(r=>e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(se,{id:`op-${r}`,checked:c.includes(r),onCheckedChange:()=>b(r),className:"h-4 w-4"}),e.jsx("label",{htmlFor:`op-${r}`,className:"text-[13px] font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:_(r)})]},r))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"text-xs text-muted-foreground",children:"格式"}),e.jsxs(ve,{value:h,onValueChange:r=>p(r),className:"flex gap-4 items-center h-8",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(L,{value:"horizontal",id:"r-horizontal",className:"h-4 w-4"}),e.jsx(R,{htmlFor:"r-horizontal",className:"text-[13px] font-normal cursor-pointer",children:"横式"})]}),e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(L,{value:"vertical",id:"r-vertical",className:"h-4 w-4"}),e.jsx(R,{htmlFor:"r-vertical",className:"text-[13px] font-normal cursor-pointer",children:"竖式"})]})]})]})]})})]}),e.jsxs("div",{className:"print:block min-h-[500px]",id:"print-area",children:[e.jsxs("div",{className:"hidden print:block mb-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"口算能力测试"}),e.jsxs("div",{className:"mt-4 flex justify-center gap-12 text-[13px]",children:[e.jsx("span",{children:"班级: ____________"}),e.jsx("span",{children:"姓名: ____________"}),e.jsx("span",{children:"日期: ____________"}),e.jsx("span",{children:"用时: ____________"}),e.jsx("span",{children:"得分: ____________"})]})]}),e.jsx("div",{className:`grid w-full ${h==="vertical"?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 print:grid-cols-5 gap-x-12 gap-y-12":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 print:grid-cols-3 gap-x-12 gap-y-8"}`,children:l.map((r,u)=>e.jsx("div",{className:"font-mono text-xl flex justify-center",style:{breakInside:"avoid"},children:h==="vertical"?r.operator==="/"?e.jsxs("div",{className:"flex items-center justify-center text-lg",children:[e.jsx("div",{className:"mr-2",children:r.num2}),e.jsx("div",{className:"border-l border-t border-black px-2 pt-0.5 pb-0.5 min-w-[3em]",children:r.num1})]}):e.jsxs("div",{className:"inline-flex flex-col items-end",style:{letterSpacing:"0.1em"},children:[e.jsx("div",{className:"text-right w-full",children:r.num1}),e.jsxs("div",{className:"text-right w-full border-b-2 border-black relative",children:[e.jsx("span",{className:"absolute left-0 -translate-x-full pr-2",children:_(r.operator)}),r.num2]}),e.jsx("div",{className:"h-8"})]}):e.jsx("div",{className:"flex items-baseline justify-between border-b border-dashed border-gray-300 pb-1 w-full",children:e.jsxs("span",{children:[r.num1," ",_(r.operator)," ",r.num2," = "]})})},u))}),l.length===0&&e.jsx("div",{className:"print:hidden text-center py-20 text-muted-foreground border-2 border-dashed rounded-lg bg-muted/10",children:"请选择配置并点击“生成试卷”"})]}),e.jsx("style",{children:`
        @media print {
            @page {
                size: A4;
                margin: 20mm;
            }
            body {
                background: white;
            }
            nav, header, aside, footer, .print\\:hidden {
                display: none !important;
            }
            main {
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                max-width: none !important;
                display: block !important;
            }
            .container {
                max-width: none !important;
                padding: 0 !important;
                margin: 0 !important;
            }
        }
      `})]})}export{Ye as default};
