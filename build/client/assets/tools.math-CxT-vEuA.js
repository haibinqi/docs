import{r as o,j as e}from"./jsx-runtime-BDw8OB7t.js";import{c as ye,B as V}from"./button-BRIOkNW8.js";import{c as P}from"./utils-CDN07tui.js";import{u as A}from"./index-DEgJNgjO.js";import{c as K,a as q,P as U,b as w,u as H,d as S,e as X,C as _e,f as W,g as je,R as ke,I as Re,D as Ne}from"./react-icons.esm-bRy50t4j.js";import"./index-u55fAOmI.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],we=K("calculator",Ce);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ee=K("printer",Ie),D=o.forwardRef(({className:r,type:s,...a},d)=>e.jsx("input",{type:s,className:P("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:d,...a}));D.displayName="Input";const Pe=ye("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),N=o.forwardRef(({className:r,...s},a)=>e.jsx("label",{ref:a,className:P(Pe(),r),...s}));N.displayName="Label";function Y(r){const s=o.useRef({value:r,previous:r});return o.useMemo(()=>(s.current.value!==r&&(s.current.previous=s.current.value,s.current.value=r),s.current.previous),[r])}var B="Checkbox",[Me]=q(B),[Se,T]=Me(B);function Ae(r){const{__scopeCheckbox:s,checked:a,children:d,defaultChecked:i,disabled:n,form:l,name:x,onCheckedChange:c,required:v,value:h="on",internal_do_not_use_render:p}=r,[b,m]=H({prop:a,defaultProp:i??!1,onChange:c,caller:B}),[f,y]=o.useState(null),[t,u]=o.useState(null),g=o.useRef(!1),I=f?!!l||!!f.closest("form"):!0,R={checked:b,disabled:n,setChecked:m,control:f,setControl:y,name:x,form:l,value:h,hasConsumerStoppedPropagationRef:g,required:v,defaultChecked:C(i)?!1:i,isFormControl:I,bubbleInput:t,setBubbleInput:u};return e.jsx(Se,{scope:s,...R,children:Ge(p)?p(R):d})}var J="CheckboxTrigger",Q=o.forwardRef(({__scopeCheckbox:r,onKeyDown:s,onClick:a,...d},i)=>{const{control:n,value:l,disabled:x,checked:c,required:v,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:b,isFormControl:m,bubbleInput:f}=T(J,r),y=A(i,h),t=o.useRef(c);return o.useEffect(()=>{const u=n==null?void 0:n.form;if(u){const g=()=>p(t.current);return u.addEventListener("reset",g),()=>u.removeEventListener("reset",g)}},[n,p]),e.jsx(w.button,{type:"button",role:"checkbox","aria-checked":C(c)?"mixed":c,"aria-required":v,"data-state":ae(c),"data-disabled":x?"":void 0,disabled:x,value:l,...d,ref:y,onKeyDown:S(s,u=>{u.key==="Enter"&&u.preventDefault()}),onClick:S(a,u=>{p(g=>C(g)?!0:!g),f&&m&&(b.current=u.isPropagationStopped(),b.current||u.stopPropagation())})})});Q.displayName=J;var z=o.forwardRef((r,s)=>{const{__scopeCheckbox:a,name:d,checked:i,defaultChecked:n,required:l,disabled:x,value:c,onCheckedChange:v,form:h,...p}=r;return e.jsx(Ae,{__scopeCheckbox:a,checked:i,defaultChecked:n,disabled:x,required:l,onCheckedChange:v,name:d,form:h,value:c,internal_do_not_use_render:({isFormControl:b})=>e.jsxs(e.Fragment,{children:[e.jsx(Q,{...p,ref:s,__scopeCheckbox:a}),b&&e.jsx(te,{__scopeCheckbox:a})]})})});z.displayName=B;var Z="CheckboxIndicator",ee=o.forwardRef((r,s)=>{const{__scopeCheckbox:a,forceMount:d,...i}=r,n=T(Z,a);return e.jsx(U,{present:d||C(n.checked)||n.checked===!0,children:e.jsx(w.span,{"data-state":ae(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...r.style}})})});ee.displayName=Z;var re="CheckboxBubbleInput",te=o.forwardRef(({__scopeCheckbox:r,...s},a)=>{const{control:d,hasConsumerStoppedPropagationRef:i,checked:n,defaultChecked:l,required:x,disabled:c,name:v,value:h,form:p,bubbleInput:b,setBubbleInput:m}=T(re,r),f=A(a,m),y=Y(n),t=X(d);o.useEffect(()=>{const g=b;if(!g)return;const I=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(I,"checked").set,j=!i.current;if(y!==n&&_){const k=new Event("click",{bubbles:j});g.indeterminate=C(n),_.call(g,C(n)?!1:n),g.dispatchEvent(k)}},[b,y,n,i]);const u=o.useRef(C(n)?!1:n);return e.jsx(w.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??u.current,required:x,disabled:c,name:v,value:h,form:p,...s,tabIndex:-1,ref:f,style:{...s.style,...t,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});te.displayName=re;function Ge(r){return typeof r=="function"}function C(r){return r==="indeterminate"}function ae(r){return C(r)?"indeterminate":r?"checked":"unchecked"}const se=o.forwardRef(({className:r,...s},a)=>e.jsx(z,{ref:a,className:P("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:e.jsx(ee,{className:P("grid place-content-center text-current"),children:e.jsx(_e,{className:"h-4 w-4"})})}));se.displayName=z.displayName;var $="Radio",[Fe,ne]=q($),[De,Be]=Fe($),oe=o.forwardRef((r,s)=>{const{__scopeRadio:a,name:d,checked:i=!1,required:n,disabled:l,value:x="on",onCheck:c,form:v,...h}=r,[p,b]=o.useState(null),m=A(s,t=>b(t)),f=o.useRef(!1),y=p?v||!!p.closest("form"):!0;return e.jsxs(De,{scope:a,checked:i,disabled:l,children:[e.jsx(w.button,{type:"button",role:"radio","aria-checked":i,"data-state":le(i),"data-disabled":l?"":void 0,disabled:l,value:x,...h,ref:m,onClick:S(r.onClick,t=>{i||c==null||c(),y&&(f.current=t.isPropagationStopped(),f.current||t.stopPropagation())})}),y&&e.jsx(de,{control:p,bubbles:!f.current,name:d,value:x,checked:i,required:n,disabled:l,form:v,style:{transform:"translateX(-100%)"}})]})});oe.displayName=$;var ie="RadioIndicator",ce=o.forwardRef((r,s)=>{const{__scopeRadio:a,forceMount:d,...i}=r,n=Be(ie,a);return e.jsx(U,{present:d||n.checked,children:e.jsx(w.span,{"data-state":le(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s})})});ce.displayName=ie;var Oe="RadioBubbleInput",de=o.forwardRef(({__scopeRadio:r,control:s,checked:a,bubbles:d=!0,...i},n)=>{const l=o.useRef(null),x=A(l,n),c=Y(a),v=X(s);return o.useEffect(()=>{const h=l.current;if(!h)return;const p=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==a&&m){const f=new Event("click",{bubbles:d});m.call(h,a),h.dispatchEvent(f)}},[c,a,d]),e.jsx(w.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:x,style:{...i.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});de.displayName=Oe;function le(r){return r?"checked":"unchecked"}var Le=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],O="RadioGroup",[qe]=q(O,[W,ne]),ue=W(),pe=ne(),[Te,ze]=qe(O),me=o.forwardRef((r,s)=>{const{__scopeRadioGroup:a,name:d,defaultValue:i,value:n,required:l=!1,disabled:x=!1,orientation:c,dir:v,loop:h=!0,onValueChange:p,...b}=r,m=ue(a),f=je(v),[y,t]=H({prop:n,defaultProp:i??null,onChange:p,caller:O});return e.jsx(Te,{scope:a,name:d,required:l,disabled:x,value:y,onValueChange:t,children:e.jsx(ke,{asChild:!0,...m,orientation:c,dir:f,loop:h,children:e.jsx(w.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":x?"":void 0,dir:f,...b,ref:s})})})});me.displayName=O;var he="RadioGroupItem",fe=o.forwardRef((r,s)=>{const{__scopeRadioGroup:a,disabled:d,...i}=r,n=ze(he,a),l=n.disabled||d,x=ue(a),c=pe(a),v=o.useRef(null),h=A(s,v),p=n.value===i.value,b=o.useRef(!1);return o.useEffect(()=>{const m=y=>{Le.includes(y.key)&&(b.current=!0)},f=()=>b.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",f)}},[]),e.jsx(Re,{asChild:!0,...x,focusable:!l,active:p,children:e.jsx(oe,{disabled:l,required:n.required,checked:p,...c,...i,name:n.name,ref:h,onCheck:()=>n.onValueChange(i.value),onKeyDown:S(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:S(i.onFocus,()=>{var m;b.current&&((m=v.current)==null||m.click())})})})});fe.displayName=he;var $e="RadioGroupIndicator",xe=o.forwardRef((r,s)=>{const{__scopeRadioGroup:a,...d}=r,i=pe(a);return e.jsx(ce,{...i,...d,ref:s})});xe.displayName=$e;var be=me,ve=fe,Ve=xe;const ge=o.forwardRef(({className:r,...s},a)=>e.jsx(be,{className:P("grid gap-2",r),...s,ref:a}));ge.displayName=be.displayName;const L=o.forwardRef(({className:r,...s},a)=>e.jsx(ve,{ref:a,className:P("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),...s,children:e.jsx(Ve,{className:"flex items-center justify-center",children:e.jsx(Ne,{className:"h-3.5 w-3.5 fill-primary"})})}));L.displayName=ve.displayName;function Je(){const[r,s]=o.useState("1-100"),[a,d]=o.useState("1-100"),[i,n]=o.useState(20),[l,x]=o.useState([]),[c,v]=o.useState(["+"]),[h,p]=o.useState("horizontal"),b=t=>{v(u=>u.includes(t)?u.filter(g=>g!==t):[...u,t])},m=()=>{if(c.length===0)return;const t=R=>{const _=R.split("-").map(j=>parseInt(j.trim(),10));return _.length===1?{min:1,max:_[0]||100}:{min:_[0]||1,max:_[1]||100}},u=t(r),g=t(a),I=[];for(let R=0;R<i;R++){const _=c[Math.floor(Math.random()*c.length)];let j=Math.floor(Math.random()*(u.max-u.min+1))+u.min,k=Math.floor(Math.random()*(g.max-g.min+1))+g.min,G=j,F=k;switch(_){case"-":G=Math.max(j,k),F=Math.min(j,k);break;case"/":k===0&&(k=1);let E=Math.max(j,k),M=Math.min(j,k);M===0&&(M=1),E=E-E%M,E===0&&u.max>0&&(E=M),G=E,F=M;break;default:G=j,F=k}I.push({num1:G,num2:F,operator:_})}x(I)},f=()=>{window.print()},y=t=>{switch(t){case"*":return"×";case"/":return"÷";default:return t}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"print:hidden space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(we,{className:"h-8 w-8 text-primary"}),"小学生口算生成器"]}),e.jsx("p",{className:"text-muted-foreground",children:"自定义生成加减乘除口算题，支持竖式和横式。"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 items-start bg-muted/30 p-4 rounded-lg border",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"range1",children:"数字1范围"}),e.jsx(D,{id:"range1",value:r,onChange:t=>s(t.target.value),placeholder:"1-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"range2",children:"数字2范围"}),e.jsx(D,{id:"range2",value:a,onChange:t=>d(t.target.value),placeholder:"1-100"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"count",children:"题目数量"}),e.jsx(D,{id:"count",type:"number",value:i,onChange:t=>n(parseInt(t.target.value)||0)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"运算符号"}),e.jsx("div",{className:"flex gap-4",children:["+","-","*","/"].map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{id:`op-${t}`,checked:c.includes(t),onCheckedChange:()=>b(t)}),e.jsx("label",{htmlFor:`op-${t}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:y(t)})]},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"题目格式"}),e.jsxs(ge,{value:h,onValueChange:t=>p(t),className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{value:"horizontal",id:"r-horizontal"}),e.jsx(N,{htmlFor:"r-horizontal",children:"横式 (1 + 1 = )"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{value:"vertical",id:"r-vertical"}),e.jsx(N,{htmlFor:"r-vertical",children:"竖式"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 justify-end h-full",children:[e.jsx(V,{onClick:m,size:"lg",disabled:c.length===0,children:"生成试卷"}),e.jsxs(V,{variant:"outline",onClick:f,children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"})," 打印A4"]})]})]})]}),e.jsxs("div",{className:"print:block min-h-[500px]",id:"print-area",children:[e.jsxs("div",{className:"hidden print:block mb-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"口算能力测试"}),e.jsxs("div",{className:"mt-4 flex justify-center gap-12 text-sm",children:[e.jsx("span",{children:"班级: ____________"}),e.jsx("span",{children:"姓名: ____________"}),e.jsx("span",{children:"日期: ____________"}),e.jsx("span",{children:"用时: ____________"}),e.jsx("span",{children:"得分: ____________"})]})]}),e.jsx("div",{className:`grid w-full ${h==="vertical"?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 print:grid-cols-5 gap-x-12 gap-y-12":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 print:grid-cols-3 gap-x-12 gap-y-8"}`,children:l.map((t,u)=>e.jsx("div",{className:"font-mono text-xl flex justify-center",style:{breakInside:"avoid"},children:h==="vertical"?t.operator==="/"?e.jsxs("div",{className:"flex items-center justify-center text-lg",children:[e.jsx("div",{className:"mr-2",children:t.num2}),e.jsx("div",{className:"border-l border-t border-black px-2 pt-0.5 pb-0.5 min-w-[3em]",children:t.num1})]}):e.jsxs("div",{className:"inline-flex flex-col items-end",style:{letterSpacing:"0.1em"},children:[e.jsx("div",{className:"text-right w-full",children:t.num1}),e.jsxs("div",{className:"text-right w-full border-b-2 border-black relative",children:[e.jsx("span",{className:"absolute left-0 -translate-x-full pr-2",children:y(t.operator)}),t.num2]}),e.jsx("div",{className:"h-8"})]}):e.jsx("div",{className:"flex items-baseline justify-between border-b border-dashed border-gray-300 pb-1 w-full",children:e.jsxs("span",{children:[t.num1," ",y(t.operator)," ",t.num2," = "]})})},u))}),l.length===0&&e.jsx("div",{className:"print:hidden text-center py-20 text-muted-foreground border-2 border-dashed rounded-lg bg-muted/10",children:"请选择配置并点击“生成试卷”"})]}),e.jsx("style",{children:`
        @media print {
            @page {
                size: A4;
                margin: 20mm;
            }
            body {
                background: white;
            }
            nav, header, aside, footer, .print\\:hidden {
                display: none !important;
            }
            main {
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                max-width: none !important;
                display: block !important;
            }
            .container {
                max-width: none !important;
                padding: 0 !important;
                margin: 0 !important;
            }
        }
      `})]})}export{Je as default};
