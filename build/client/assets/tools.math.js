import{r as n,j as e}from"./jsx-runtime.js";import{B as H}from"./button.js";import{I as O}from"./input.js";import{L as w}from"./label.js";import{u as M}from"./index2.js";import{c as T,f as U,P as C,d as V,b as S}from"./index6.js";import{u as X}from"./index4.js";import{u as W}from"./index5.js";import{c as F}from"./utils.js";import{C as je,D as Ne}from"./react-icons.esm.js";import{c as Y,R as ke,I as _e}from"./index7.js";import{u as Re}from"./index8.js";import{c as J}from"./createLucideIcon.js";import{C as K}from"./calculator.js";import"./index3.js";import"./index.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ce=J("printer",we);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Ee=J("settings-2",Ie);var D="Checkbox",[Pe]=T(D),[Se,q]=Pe(D);function Me(r){const{__scopeCheckbox:i,checked:a,children:l,defaultChecked:o,disabled:s,form:d,name:x,onCheckedChange:c,required:v,value:h="on",internal_do_not_use_render:m}=r,[b,p]=V({prop:a,defaultProp:o??!1,onChange:c,caller:D}),[f,y]=n.useState(null),[t,u]=n.useState(null),g=n.useRef(!1),I=f?!!d||!!f.closest("form"):!0,_={checked:b,disabled:s,setChecked:p,control:f,setControl:y,name:x,form:d,value:h,hasConsumerStoppedPropagationRef:g,required:v,defaultChecked:R(o)?!1:o,isFormControl:I,bubbleInput:t,setBubbleInput:u};return e.jsx(Se,{scope:i,..._,children:Ae(m)?m(_):l})}var Q="CheckboxTrigger",Z=n.forwardRef(({__scopeCheckbox:r,onKeyDown:i,onClick:a,...l},o)=>{const{control:s,value:d,disabled:x,checked:c,required:v,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:b,isFormControl:p,bubbleInput:f}=q(Q,r),y=M(o,h),t=n.useRef(c);return n.useEffect(()=>{const u=s==null?void 0:s.form;if(u){const g=()=>m(t.current);return u.addEventListener("reset",g),()=>u.removeEventListener("reset",g)}},[s,m]),e.jsx(C.button,{type:"button",role:"checkbox","aria-checked":R(c)?"mixed":c,"aria-required":v,"data-state":ae(c),"data-disabled":x?"":void 0,disabled:x,value:d,...l,ref:y,onKeyDown:S(i,u=>{u.key==="Enter"&&u.preventDefault()}),onClick:S(a,u=>{m(g=>R(g)?!0:!g),f&&p&&(b.current=u.isPropagationStopped(),b.current||u.stopPropagation())})})});Z.displayName=Q;var z=n.forwardRef((r,i)=>{const{__scopeCheckbox:a,name:l,checked:o,defaultChecked:s,required:d,disabled:x,value:c,onCheckedChange:v,form:h,...m}=r;return e.jsx(Me,{__scopeCheckbox:a,checked:o,defaultChecked:s,disabled:x,required:d,onCheckedChange:v,name:l,form:h,value:c,internal_do_not_use_render:({isFormControl:b})=>e.jsxs(e.Fragment,{children:[e.jsx(Z,{...m,ref:i,__scopeCheckbox:a}),b&&e.jsx(se,{__scopeCheckbox:a})]})})});z.displayName=D;var ee="CheckboxIndicator",te=n.forwardRef((r,i)=>{const{__scopeCheckbox:a,forceMount:l,...o}=r,s=q(ee,a);return e.jsx(U,{present:l||R(s.checked)||s.checked===!0,children:e.jsx(C.span,{"data-state":ae(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:i,style:{pointerEvents:"none",...r.style}})})});te.displayName=ee;var re="CheckboxBubbleInput",se=n.forwardRef(({__scopeCheckbox:r,...i},a)=>{const{control:l,hasConsumerStoppedPropagationRef:o,checked:s,defaultChecked:d,required:x,disabled:c,name:v,value:h,form:m,bubbleInput:b,setBubbleInput:p}=q(re,r),f=M(a,p),y=X(s),t=W(l);n.useEffect(()=>{const g=b;if(!g)return;const I=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(I,"checked").set,N=!o.current;if(y!==s&&j){const k=new Event("click",{bubbles:N});g.indeterminate=R(s),j.call(g,R(s)?!1:s),g.dispatchEvent(k)}},[b,y,s,o]);const u=n.useRef(R(s)?!1:s);return e.jsx(C.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??u.current,required:x,disabled:c,name:v,value:h,form:m,...i,tabIndex:-1,ref:f,style:{...i.style,...t,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});se.displayName=re;function Ae(r){return typeof r=="function"}function R(r){return r==="indeterminate"}function ae(r){return R(r)?"indeterminate":r?"checked":"unchecked"}const oe=n.forwardRef(({className:r,...i},a)=>e.jsx(z,{ref:a,className:F("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...i,children:e.jsx(te,{className:F("grid place-content-center text-current"),children:e.jsx(je,{className:"h-4 w-4"})})}));oe.displayName=z.displayName;var $="Radio",[Ge,ne]=T($),[Fe,De]=Ge($),ie=n.forwardRef((r,i)=>{const{__scopeRadio:a,name:l,checked:o=!1,required:s,disabled:d,value:x="on",onCheck:c,form:v,...h}=r,[m,b]=n.useState(null),p=M(i,t=>b(t)),f=n.useRef(!1),y=m?v||!!m.closest("form"):!0;return e.jsxs(Fe,{scope:a,checked:o,disabled:d,children:[e.jsx(C.button,{type:"button",role:"radio","aria-checked":o,"data-state":ue(o),"data-disabled":d?"":void 0,disabled:d,value:x,...h,ref:p,onClick:S(r.onClick,t=>{o||c==null||c(),y&&(f.current=t.isPropagationStopped(),f.current||t.stopPropagation())})}),y&&e.jsx(le,{control:m,bubbles:!f.current,name:l,value:x,checked:o,required:s,disabled:d,form:v,style:{transform:"translateX(-100%)"}})]})});ie.displayName=$;var ce="RadioIndicator",de=n.forwardRef((r,i)=>{const{__scopeRadio:a,forceMount:l,...o}=r,s=De(ce,a);return e.jsx(U,{present:l||s.checked,children:e.jsx(C.span,{"data-state":ue(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:i})})});de.displayName=ce;var Be="RadioBubbleInput",le=n.forwardRef(({__scopeRadio:r,control:i,checked:a,bubbles:l=!0,...o},s)=>{const d=n.useRef(null),x=M(d,s),c=X(a),v=W(i);return n.useEffect(()=>{const h=d.current;if(!h)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==a&&p){const f=new Event("click",{bubbles:l});p.call(h,a),h.dispatchEvent(f)}},[c,a,l]),e.jsx(C.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:x,style:{...o.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});le.displayName=Be;function ue(r){return r?"checked":"unchecked"}var Oe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],B="RadioGroup",[Le]=T(B,[Y,ne]),me=Y(),pe=ne(),[Te,qe]=Le(B),he=n.forwardRef((r,i)=>{const{__scopeRadioGroup:a,name:l,defaultValue:o,value:s,required:d=!1,disabled:x=!1,orientation:c,dir:v,loop:h=!0,onValueChange:m,...b}=r,p=me(a),f=Re(v),[y,t]=V({prop:s,defaultProp:o??null,onChange:m,caller:B});return e.jsx(Te,{scope:a,name:l,required:d,disabled:x,value:y,onValueChange:t,children:e.jsx(ke,{asChild:!0,...p,orientation:c,dir:f,loop:h,children:e.jsx(C.div,{role:"radiogroup","aria-required":d,"aria-orientation":c,"data-disabled":x?"":void 0,dir:f,...b,ref:i})})})});he.displayName=B;var fe="RadioGroupItem",xe=n.forwardRef((r,i)=>{const{__scopeRadioGroup:a,disabled:l,...o}=r,s=qe(fe,a),d=s.disabled||l,x=me(a),c=pe(a),v=n.useRef(null),h=M(i,v),m=s.value===o.value,b=n.useRef(!1);return n.useEffect(()=>{const p=y=>{Oe.includes(y.key)&&(b.current=!0)},f=()=>b.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",f)}},[]),e.jsx(_e,{asChild:!0,...x,focusable:!d,active:m,children:e.jsx(ie,{disabled:d,required:s.required,checked:m,...c,...o,name:s.name,ref:h,onCheck:()=>s.onValueChange(o.value),onKeyDown:S(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:S(o.onFocus,()=>{var p;b.current&&((p=v.current)==null||p.click())})})})});xe.displayName=fe;var ze="RadioGroupIndicator",be=n.forwardRef((r,i)=>{const{__scopeRadioGroup:a,...l}=r,o=pe(a);return e.jsx(de,{...o,...l,ref:i})});be.displayName=ze;var ve=he,ge=xe,$e=be;const ye=n.forwardRef(({className:r,...i},a)=>e.jsx(ve,{className:F("grid gap-2",r),...i,ref:a}));ye.displayName=ve.displayName;const L=n.forwardRef(({className:r,...i},a)=>e.jsx(ge,{ref:a,className:F("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),...i,children:e.jsx($e,{className:"flex items-center justify-center",children:e.jsx(Ne,{className:"h-3.5 w-3.5 fill-primary"})})}));L.displayName=ge.displayName;function nt(){const[r,i]=n.useState("1-9999"),[a,l]=n.useState("1-9999"),[o,s]=n.useState(30),[d,x]=n.useState([]),[c,v]=n.useState(["+"]),[h,m]=n.useState("horizontal"),b=t=>{v(u=>u.includes(t)?u.filter(g=>g!==t):[...u,t])},p=()=>{if(c.length===0)return;const t=_=>{const j=_.split("-").map(N=>parseInt(N.trim(),10));return j.length===1?{min:1,max:j[0]||100}:{min:j[0]||1,max:j[1]||100}},u=t(r),g=t(a),I=[];for(let _=0;_<o;_++){const j=c[Math.floor(Math.random()*c.length)];let N=Math.floor(Math.random()*(u.max-u.min+1))+u.min,k=Math.floor(Math.random()*(g.max-g.min+1))+g.min,A=N,G=k;switch(j){case"-":A=Math.max(N,k),G=Math.min(N,k);break;case"/":k===0&&(k=1);let E=Math.max(N,k),P=Math.min(N,k);P===0&&(P=1),E=E-E%P,E===0&&u.max>0&&(E=P),A=E,G=P;break;default:A=N,G=k}I.push({num1:A,num2:G,operator:j})}x(I)},f=()=>{window.print()},y=t=>{switch(t){case"*":return"×";case"/":return"÷";default:return t}};return e.jsxs("div",{className:"flex-1 w-full bg-background flex min-h-0 h-[calc(100vh-8rem)] border rounded-lg overflow-hidden mt-[5px]",children:[e.jsxs("div",{className:"w-[300px] border-r bg-muted/10 flex flex-col shrink-0 print:hidden",children:[e.jsx("div",{className:"h-12 px-4 border-b flex items-center justify-between bg-muted/30",children:e.jsxs("span",{className:"font-medium text-sm flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),"出题配置"]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(w,{htmlFor:"range1",className:"text-xs text-muted-foreground font-medium",children:"数字1范围"}),e.jsx(O,{id:"range1",className:"h-8 text-[13px]",value:r,onChange:t=>i(t.target.value),placeholder:"1-100"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(w,{htmlFor:"range2",className:"text-xs text-muted-foreground font-medium",children:"数字2范围"}),e.jsx(O,{id:"range2",className:"h-8 text-[13px]",value:a,onChange:t=>l(t.target.value),placeholder:"1-100"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(w,{htmlFor:"count",className:"text-xs text-muted-foreground font-medium",children:"题目数量"}),e.jsx(O,{id:"count",type:"number",className:"h-8 text-[13px]",value:o,onChange:t=>s(parseInt(t.target.value)||0)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{className:"text-xs text-muted-foreground font-medium",children:"运算符号"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["+","-","*","/"].map(t=>e.jsxs("div",{className:"flex items-center space-x-2 border rounded-md p-2 bg-background",children:[e.jsx(oe,{id:`op-${t}`,checked:c.includes(t),onCheckedChange:()=>b(t),className:"h-4 w-4"}),e.jsx("label",{htmlFor:`op-${t}`,className:"text-[13px] font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex-1 cursor-pointer",children:y(t)})]},t))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{className:"text-xs text-muted-foreground font-medium",children:"试卷格式"}),e.jsxs(ye,{value:h,onValueChange:t=>m(t),className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 border rounded-md p-2 bg-background",children:[e.jsx(L,{value:"horizontal",id:"r-horizontal",className:"h-4 w-4"}),e.jsx(w,{htmlFor:"r-horizontal",className:"text-[13px] font-normal cursor-pointer flex-1",children:"横式"})]}),e.jsxs("div",{className:"flex items-center space-x-2 border rounded-md p-2 bg-background",children:[e.jsx(L,{value:"vertical",id:"r-vertical",className:"h-4 w-4"}),e.jsx(w,{htmlFor:"r-vertical",className:"text-[13px] font-normal cursor-pointer flex-1",children:"竖式"})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(H,{onClick:p,className:"w-full h-8 text-[13px]",disabled:c.length===0,children:"生成试卷"})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-white",children:[e.jsxs("div",{className:"h-12 px-4 border-b flex items-center justify-between bg-muted/30 print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium text-sm",children:"试卷预览"})]}),e.jsxs(H,{variant:"outline",onClick:f,size:"sm",className:"h-8 px-3 text-[13px]",children:[e.jsx(Ce,{className:"mr-2 h-3.5 w-3.5"})," 打印A4"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8",id:"print-area",children:[e.jsxs("div",{className:"text-center mb-8 hidden print:block",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"口算练习题"}),e.jsxs("div",{className:"flex justify-center gap-8 text-sm text-gray-500",children:[e.jsx("span",{children:"日期：______________"}),e.jsx("span",{children:"用时：______________"}),e.jsx("span",{children:"得分：______________"})]})]}),e.jsx("div",{className:`grid w-full ${h==="vertical"?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 print:grid-cols-5 gap-x-12 gap-y-12":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 print:grid-cols-3 gap-x-12 gap-y-8"}`,children:d.map((t,u)=>e.jsx("div",{className:"font-mono text-xl flex justify-center",style:{breakInside:"avoid"},children:h==="vertical"?t.operator==="/"?e.jsxs("div",{className:"flex items-center justify-center text-lg",children:[e.jsx("div",{className:"mr-2",children:t.num2}),e.jsx("div",{className:"border-l border-t border-black px-2 pt-0.5 pb-0.5 min-w-[3em]",children:t.num1})]}):e.jsxs("div",{className:"inline-flex flex-col items-end",style:{letterSpacing:"0.1em"},children:[e.jsx("div",{className:"text-right w-full",children:t.num1}),e.jsxs("div",{className:"text-right w-full border-b-2 border-black relative",children:[e.jsx("span",{className:"absolute left-0 -translate-x-full pr-2",children:y(t.operator)}),t.num2]}),e.jsx("div",{className:"h-16"})]}):e.jsx("div",{className:"flex items-baseline justify-between border-b border-dashed border-gray-300 pb-1 w-full",children:e.jsxs("span",{children:[t.num1," ",y(t.operator)," ",t.num2," = "]})})},u))}),d.length===0&&e.jsxs("div",{className:"print:hidden flex flex-col items-center justify-center h-full text-muted-foreground border-2 border-dashed rounded-lg bg-muted/5 m-4",children:[e.jsx(K,{className:"w-12 h-12 mb-4 opacity-20"}),e.jsx("p",{className:"text-sm",children:"请在左侧配置并点击“生成试卷”"})]})]})]}),e.jsx("style",{children:`
        @media print {
            @page {
                size: A4;
                margin: 15mm;
            }
            body {
                background: white;
                visibility: hidden;
            }
            /* Hide everything by default */
            body * {
                visibility: hidden;
            }
            
            /* Only show the print area and its children */
            #print-area, #print-area * {
                visibility: visible;
            }

            /* Reset the print area to top-left of the page */
            #print-area {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0 !important;
                padding: 0 !important;
                display: block !important;
                overflow: visible !important;
            }

            /* Ensure internal grid works */
            .grid {
                display: grid !important;
            }
            
            /* Neutralize the root layout (Remix/Tailwind specific) */
            body > div {
                display: block !important;
                position: static !important;
                min-height: 0 !important;
                height: auto !important;
                overflow: visible !important;
            }
            
            /* Hide standard layout elements just in case */
            nav, header, aside, footer, .print\\:hidden {
                display: none !important;
            }
        }
      `})]})}export{nt as default};
