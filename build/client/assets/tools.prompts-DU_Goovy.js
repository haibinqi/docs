import{r as i,j as n}from"./jsx-runtime-BDw8OB7t.js";import{u as C,c as me,B as _}from"./button-BF-7J69j.js";import{u as M,a as ge,c as pe,b as A,P as v,d as h,e as xe,h as he,R as ve,f as Ne,F as ye,D as je,g as be,S as T,i as S,j as k,k as F,l as w,T as De}from"./select-Df6w1pt1.js";import{c as N}from"./utils-CDN07tui.js";import{c as y}from"./createLucideIcon-3FgSs6nL.js";import{t as Ce,v as Re,w as Ee}from"./components-uY1RQYdm.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ae=y("eye",_e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Oe=y("funnel",we);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ie=y("plus",Pe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Te=y("trash-2",Me);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ke=y("x",Se);function Fe(e,t){return i.useReducer((o,a)=>t[o][a]??o,e)}var R=e=>{const{present:t,children:o}=e,a=We(t),r=typeof o=="function"?o({present:a.isPresent}):i.Children.only(o),s=C(a.ref,Le(r));return typeof o=="function"||a.isPresent?i.cloneElement(r,{ref:s}):null};R.displayName="Presence";function We(e){const[t,o]=i.useState(),a=i.useRef(null),r=i.useRef(e),s=i.useRef("none"),d=e?"mounted":"unmounted",[c,l]=Fe(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const u=b(a.current);s.current=c==="mounted"?u:"none"},[c]),M(()=>{const u=a.current,f=r.current;if(f!==e){const j=s.current,p=b(u);e?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(f&&j!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),M(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,g=p=>{const ue=b(a.current).includes(CSS.escape(p.animationName));if(p.target===t&&ue&&(l("ANIMATION_END"),!r.current)){const fe=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=fe)})}},j=p=>{p.target===t&&(s.current=b(a.current))};return t.addEventListener("animationstart",j),t.addEventListener("animationcancel",g),t.addEventListener("animationend",g),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",j),t.removeEventListener("animationcancel",g),t.removeEventListener("animationend",g)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:i.useCallback(u=>{a.current=u?getComputedStyle(u):null,o(u)},[])}}function b(e){return(e==null?void 0:e.animationName)||"none"}function Le(e){var a,r;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}function $e(e){const t=Ge(e),o=i.forwardRef((a,r)=>{const{children:s,...d}=a,c=i.Children.toArray(s),l=c.find(Ue);if(l){const u=l.props.children,f=c.map(g=>g===l?i.Children.count(u)>1?i.Children.only(null):i.isValidElement(u)?u.props.children:null:g);return n.jsx(t,{...d,ref:r,children:i.isValidElement(u)?i.cloneElement(u,void 0,f):null})}return n.jsx(t,{...d,ref:r,children:s})});return o.displayName=`${e}.Slot`,o}function Ge(e){const t=i.forwardRef((o,a)=>{const{children:r,...s}=o;if(i.isValidElement(r)){const d=He(r),c=ze(s,r.props);return r.type!==i.Fragment&&(c.ref=a?me(a,d):d),i.cloneElement(r,c)}return i.Children.count(r)>1?i.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ve=Symbol("radix.slottable");function Ue(e){return i.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ve}function ze(e,t){const o={...t};for(const a in t){const r=e[a],s=t[a];/^on[A-Z]/.test(a)?r&&s?o[a]=(...c)=>{const l=s(...c);return r(...c),l}:r&&(o[a]=r):a==="style"?o[a]={...r,...s}:a==="className"&&(o[a]=[r,s].filter(Boolean).join(" "))}return{...e,...o}}function He(e){var a,r;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}var E="Dialog",[L]=pe(E),[Be,m]=L(E),$=e=>{const{__scopeDialog:t,children:o,open:a,defaultOpen:r,onOpenChange:s,modal:d=!0}=e,c=i.useRef(null),l=i.useRef(null),[u,f]=ge({prop:a,defaultProp:r??!1,onChange:s,caller:E});return n.jsx(Be,{scope:t,triggerRef:c,contentRef:l,contentId:A(),titleId:A(),descriptionId:A(),open:u,onOpenChange:f,onOpenToggle:i.useCallback(()=>f(g=>!g),[f]),modal:d,children:o})};$.displayName=E;var G="DialogTrigger",V=i.forwardRef((e,t)=>{const{__scopeDialog:o,...a}=e,r=m(G,o),s=C(t,r.triggerRef);return n.jsx(v.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":I(r.open),...a,ref:s,onClick:h(e.onClick,r.onOpenToggle)})});V.displayName=G;var O="DialogPortal",[qe,U]=L(O,{forceMount:void 0}),z=e=>{const{__scopeDialog:t,forceMount:o,children:a,container:r}=e,s=m(O,t);return n.jsx(qe,{scope:t,forceMount:o,children:i.Children.map(a,d=>n.jsx(R,{present:o||s.open,children:n.jsx(xe,{asChild:!0,container:r,children:d})}))})};z.displayName=O;var D="DialogOverlay",H=i.forwardRef((e,t)=>{const o=U(D,e.__scopeDialog),{forceMount:a=o.forceMount,...r}=e,s=m(D,e.__scopeDialog);return s.modal?n.jsx(R,{present:a||s.open,children:n.jsx(Ke,{...r,ref:t})}):null});H.displayName=D;var Ze=$e("DialogOverlay.RemoveScroll"),Ke=i.forwardRef((e,t)=>{const{__scopeDialog:o,...a}=e,r=m(D,o);return n.jsx(ve,{as:Ze,allowPinchZoom:!0,shards:[r.contentRef],children:n.jsx(v.div,{"data-state":I(r.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),x="DialogContent",B=i.forwardRef((e,t)=>{const o=U(x,e.__scopeDialog),{forceMount:a=o.forceMount,...r}=e,s=m(x,e.__scopeDialog);return n.jsx(R,{present:a||s.open,children:s.modal?n.jsx(Xe,{...r,ref:t}):n.jsx(Ye,{...r,ref:t})})});B.displayName=x;var Xe=i.forwardRef((e,t)=>{const o=m(x,e.__scopeDialog),a=i.useRef(null),r=C(t,o.contentRef,a);return i.useEffect(()=>{const s=a.current;if(s)return he(s)},[]),n.jsx(q,{...e,ref:r,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:h(e.onCloseAutoFocus,s=>{var d;s.preventDefault(),(d=o.triggerRef.current)==null||d.focus()}),onPointerDownOutside:h(e.onPointerDownOutside,s=>{const d=s.detail.originalEvent,c=d.button===0&&d.ctrlKey===!0;(d.button===2||c)&&s.preventDefault()}),onFocusOutside:h(e.onFocusOutside,s=>s.preventDefault())})}),Ye=i.forwardRef((e,t)=>{const o=m(x,e.__scopeDialog),a=i.useRef(!1),r=i.useRef(!1);return n.jsx(q,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var d,c;(d=e.onCloseAutoFocus)==null||d.call(e,s),s.defaultPrevented||(a.current||(c=o.triggerRef.current)==null||c.focus(),s.preventDefault()),a.current=!1,r.current=!1},onInteractOutside:s=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(a.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const d=s.target;((u=o.triggerRef.current)==null?void 0:u.contains(d))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),q=i.forwardRef((e,t)=>{const{__scopeDialog:o,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:s,...d}=e,c=m(x,o),l=i.useRef(null),u=C(t,l);return Ne(),n.jsxs(n.Fragment,{children:[n.jsx(ye,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:r,onUnmountAutoFocus:s,children:n.jsx(je,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":I(c.open),...d,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(Je,{titleId:c.titleId}),n.jsx(et,{contentRef:l,descriptionId:c.descriptionId})]})]})}),P="DialogTitle",Z=i.forwardRef((e,t)=>{const{__scopeDialog:o,...a}=e,r=m(P,o);return n.jsx(v.h2,{id:r.titleId,...a,ref:t})});Z.displayName=P;var K="DialogDescription",X=i.forwardRef((e,t)=>{const{__scopeDialog:o,...a}=e,r=m(K,o);return n.jsx(v.p,{id:r.descriptionId,...a,ref:t})});X.displayName=K;var Y="DialogClose",J=i.forwardRef((e,t)=>{const{__scopeDialog:o,...a}=e,r=m(Y,o);return n.jsx(v.button,{type:"button",...a,ref:t,onClick:h(e.onClick,()=>r.onOpenChange(!1))})});J.displayName=Y;function I(e){return e?"open":"closed"}var Q="DialogTitleWarning",[gt,ee]=be(Q,{contentName:x,titleName:P,docsSlug:"dialog"}),Je=({titleId:e})=>{const t=ee(Q),o=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return i.useEffect(()=>{e&&(document.getElementById(e)||console.error(o))},[o,e]),null},Qe="DialogDescriptionWarning",et=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ee(Qe).contentName}}.`;return i.useEffect(()=>{var s;const r=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},tt=$,nt=V,ot=z,te=H,ne=B,oe=Z,ae=X,at=J;const rt=tt,st=nt,it=ot,re=i.forwardRef(({className:e,...t},o)=>n.jsx(te,{ref:o,className:N("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));re.displayName=te.displayName;const se=i.forwardRef(({className:e,children:t,...o},a)=>n.jsxs(it,{children:[n.jsx(re,{}),n.jsxs(ne,{ref:a,className:N("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...o,children:[t,n.jsxs(at,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(ke,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));se.displayName=ne.displayName;const ie=({className:e,...t})=>n.jsx("div",{className:N("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ie.displayName="DialogHeader";const le=i.forwardRef(({className:e,...t},o)=>n.jsx(oe,{ref:o,className:N("text-lg font-semibold leading-none tracking-tight",e),...t}));le.displayName=oe.displayName;const ce=i.forwardRef(({className:e,...t},o)=>n.jsx(ae,{ref:o,className:N("text-sm text-muted-foreground",e),...t}));ce.displayName=ae.displayName;const W=[{value:"General",label:"通用 (General)"},{value:"Coding",label:"编程 (Coding)"},{value:"Writing",label:"写作 (Writing)"},{value:"Data",label:"数据 (Data)"},{value:"Image",label:"绘画 (Image)"},{value:"Other",label:"其他 (Other)"}];function pt(){var c;const{prompts:e,currentCategory:t}=Ce(),o=Re(),[a,r]=Ee(),s=o.state==="submitting"&&((c=o.formData)==null?void 0:c.get("intent"))==="add",d=l=>{r(u=>(l==="All"?u.delete("category"):u.set("category",l),u))};return n.jsxs("div",{className:"flex flex-col gap-6 p-6 max-w-5xl mx-auto h-[calc(100vh-4rem)]",children:[n.jsxs("div",{className:"flex flex-col gap-2 flex-shrink-0",children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"提示词合集"}),n.jsx("p",{className:"text-muted-foreground",children:"高效管理和检索您的 AI 提示词库"})]}),n.jsxs("div",{className:"grid gap-6 flex-1 min-h-0",children:[n.jsxs(o.Form,{method:"post",className:"grid gap-4 rounded-lg border p-4 bg-muted/30 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[n.jsx(Ie,{className:"h-4 w-4"})," 新增提示词"]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"w-[180px] flex-shrink-0",children:n.jsxs(T,{name:"category",defaultValue:"General",children:[n.jsx(S,{children:n.jsx(k,{placeholder:"选择分类"})}),n.jsx(F,{children:W.map(l=>n.jsx(w,{value:l.value,children:l.label},l.value))})]})}),n.jsx(De,{name:"content",placeholder:"输入提示词内容...",className:"min-h-[80px] flex-1 bg-background resize-none",required:!0})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(_,{type:"submit",name:"intent",value:"add",disabled:s,children:s?"Saving...":"保存提示词"})})]}),n.jsxs("div",{className:"rounded-md border bg-card flex-1 min-h-0 flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"bg-muted/50 p-3 grid grid-cols-[100px_1fr_120px] gap-4 text-sm font-medium text-muted-foreground border-b flex-shrink-0 items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{className:"h-4 w-4"}),n.jsxs(T,{value:t,onValueChange:d,children:[n.jsx(S,{className:"h-8 border-none bg-transparent hover:bg-background/50 focus:ring-0 w-[110px] p-0 shadow-none",children:n.jsx(k,{placeholder:"分类筛选"})}),n.jsxs(F,{children:[n.jsx(w,{value:"All",children:"全部 (All)"}),W.map(l=>n.jsx(w,{value:l.value,children:l.label},l.value))]})]})]}),n.jsx("div",{children:"内容预览"}),n.jsx("div",{className:"text-right",children:"操作"})]}),n.jsx("div",{className:"overflow-y-auto p-0",children:e.length===0?n.jsx("div",{className:"text-center py-12 text-muted-foreground",children:t!=="All"?"该分类下暂无数据":"暂无数据"}):n.jsx("div",{className:"divide-y",children:e.map(l=>n.jsxs("div",{className:"grid grid-cols-[100px_1fr_120px] gap-4 p-3 items-center hover:bg-muted/30 transition-colors",children:[n.jsx("div",{children:n.jsx("span",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",children:l.category||"General"})}),n.jsx("div",{className:"truncate text-sm font-mono text-muted-foreground",children:l.content}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs(rt,{children:[n.jsx(st,{asChild:!0,children:n.jsx(_,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-500 hover:text-blue-600 hover:bg-blue-50",children:n.jsx(Ae,{className:"h-4 w-4"})})}),n.jsxs(se,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[n.jsxs(ie,{children:[n.jsx(le,{children:"提示词详情"}),n.jsxs(ce,{children:["分类: ",l.category||"General"," | 创建时间: ",new Date(l.created_at).toLocaleString()]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto mt-4 p-4 rounded-md bg-muted/30 border font-mono text-sm whitespace-pre-wrap break-words",children:l.content})]})]}),n.jsxs(o.Form,{method:"post",className:"inline-block",children:[n.jsx("input",{type:"hidden",name:"id",value:l.id}),n.jsx(_,{type:"submit",name:"intent",value:"delete",variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-50",children:n.jsx(Te,{className:"h-4 w-4"})})]})]})]},l.id))})})]})]})]})}export{pt as default};
