import{r as n,j as e}from"./jsx-runtime.js";import{B as de}from"./button.js";import{I as Se}from"./input.js";import{P as It,T as Pt,D as Et,a as Rt,b as _t,c as At,d as Mt}from"./dialog.js";import{c as kt}from"./index3.js";import{c as B}from"./utils.js";import{r as Ve}from"./index.js";import{P as O,d as Me,c as Dt,a as Ee,u as q,b as A,e as Ot}from"./index6.js";import{u as Lt,c as Vt}from"./index8.js";import{c as Bt,u as W}from"./index2.js";import{P as Ht,h as Wt,u as Ut,R as Ft,F as $t,D as Kt}from"./Combination.js";import{c as Be,R as zt,A as Gt,C as Yt,a as qt,b as He}from"./index9.js";import{u as Jt}from"./index4.js";import{c as le}from"./createLucideIcon.js";import{S as ke}from"./sparkles.js";import{T as Zt}from"./trash-2.js";import"./index5.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Qt=le("check",Xt);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],to=le("chevron-up",eo);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ro=le("copy",oo);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],so=le("save",no);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],lo=le("search",ao),co=kt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),We=n.forwardRef(({className:o,variant:r,...t},s)=>e.jsx("div",{ref:s,role:"alert",className:B(co({variant:r}),o),...t}));We.displayName="Alert";const io=n.forwardRef(({className:o,...r},t)=>e.jsx("h5",{ref:t,className:B("mb-1 font-medium leading-none tracking-tight",o),...r}));io.displayName="AlertTitle";const Ue=n.forwardRef(({className:o,...r},t)=>e.jsx("div",{ref:t,className:B("text-sm [&_p]:leading-relaxed",o),...r}));Ue.displayName="AlertDescription";const Re="docs-prompts";function _e(){if(typeof window>"u")return[];const o=localStorage.getItem(Re);if(!o)return[];try{return JSON.parse(o)}catch{return[]}}function uo(o){const r=_e(),t={...o,id:Date.now().toString(36)+Math.random().toString(36).slice(2,8),createdAt:Date.now()};return r.unshift(t),localStorage.setItem(Re,JSON.stringify(r)),t}function po(o){const r=_e(),t=r.filter(a=>a.id!==o),s=t.length!==r.length;return s&&localStorage.setItem(Re,JSON.stringify(t)),s}function De(o,[r,t]){return Math.min(t,Math.max(r,o))}function fo(o){const r=mo(o),t=n.forwardRef((s,a)=>{const{children:d,...i}=s,l=n.Children.toArray(d),c=l.find(xo);if(c){const u=c.props.children,v=l.map(w=>w===c?n.Children.count(u)>1?n.Children.only(null):n.isValidElement(u)?u.props.children:null:w);return e.jsx(r,{...i,ref:a,children:n.isValidElement(u)?n.cloneElement(u,void 0,v):null})}return e.jsx(r,{...i,ref:a,children:d})});return t.displayName=`${o}.Slot`,t}function mo(o){const r=n.forwardRef((t,s)=>{const{children:a,...d}=t;if(n.isValidElement(a)){const i=vo(a),l=go(d,a.props);return a.type!==n.Fragment&&(l.ref=s?Bt(s,i):i),n.cloneElement(a,l)}return n.Children.count(a)>1?n.Children.only(null):null});return r.displayName=`${o}.SlotClone`,r}var ho=Symbol("radix.slottable");function xo(o){return n.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===ho}function go(o,r){const t={...r};for(const s in r){const a=o[s],d=r[s];/^on[A-Z]/.test(s)?a&&d?t[s]=(...l)=>{const c=d(...l);return a(...l),c}:a&&(t[s]=a):s==="style"?t[s]={...a,...d}:s==="className"&&(t[s]=[a,d].filter(Boolean).join(" "))}return{...o,...t}}function vo(o){var s,a;let r=(s=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:s.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?o.ref:(r=(a=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:a.get,t=r&&"isReactWarning"in r&&r.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}var Fe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yo="VisuallyHidden",wo=n.forwardRef((o,r)=>e.jsx(O.span,{...o,ref:r,style:{...Fe,...o.style}}));wo.displayName=yo;var So=[" ","Enter","ArrowUp","ArrowDown"],No=[" ","Enter"],ee="Select",[pe,fe,Co]=Vt(ee),[re]=Dt(ee,[Co,Be]),me=Be(),[bo,J]=re(ee),[jo,To]=re(ee),$e=o=>{const{__scopeSelect:r,children:t,open:s,defaultOpen:a,onOpenChange:d,value:i,defaultValue:l,onValueChange:c,dir:u,name:v,autoComplete:w,disabled:C,required:_,form:g}=o,f=me(r),[y,S]=n.useState(null),[m,h]=n.useState(null),[M,p]=n.useState(!1),T=Lt(u),[b,N]=Me({prop:s,defaultProp:a??!1,onChange:d,caller:ee}),[j,k]=Me({prop:i,defaultProp:l,onChange:c,caller:ee}),U=n.useRef(null),F=y?g||!!y.closest("form"):!0,[G,$]=n.useState(new Set),K=Array.from(G).map(D=>D.props.value).join(";");return e.jsx(zt,{...f,children:e.jsxs(bo,{required:_,scope:r,trigger:y,onTriggerChange:S,valueNode:m,onValueNodeChange:h,valueNodeHasChildren:M,onValueNodeHasChildrenChange:p,contentId:Ee(),value:j,onValueChange:k,open:b,onOpenChange:N,dir:T,triggerPointerDownPosRef:U,disabled:C,children:[e.jsx(pe.Provider,{scope:r,children:e.jsx(jo,{scope:o.__scopeSelect,onNativeOptionAdd:n.useCallback(D=>{$(H=>new Set(H).add(D))},[]),onNativeOptionRemove:n.useCallback(D=>{$(H=>{const z=new Set(H);return z.delete(D),z})},[]),children:t})}),F?e.jsxs(mt,{"aria-hidden":!0,required:_,tabIndex:-1,name:v,autoComplete:w,value:j,onChange:D=>k(D.target.value),disabled:C,form:g,children:[j===void 0?e.jsx("option",{value:""}):null,Array.from(G)]},K):null]})})};$e.displayName=ee;var Ke="SelectTrigger",ze=n.forwardRef((o,r)=>{const{__scopeSelect:t,disabled:s=!1,...a}=o,d=me(t),i=J(Ke,t),l=i.disabled||s,c=W(r,i.onTriggerChange),u=fe(t),v=n.useRef("touch"),[w,C,_]=xt(f=>{const y=u().filter(h=>!h.disabled),S=y.find(h=>h.value===i.value),m=gt(y,f,S);m!==void 0&&i.onValueChange(m.value)}),g=f=>{l||(i.onOpenChange(!0),_()),f&&(i.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return e.jsx(Gt,{asChild:!0,...d,children:e.jsx(O.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ht(i.value)?"":void 0,...a,ref:c,onClick:A(a.onClick,f=>{f.currentTarget.focus(),v.current!=="mouse"&&g(f)}),onPointerDown:A(a.onPointerDown,f=>{v.current=f.pointerType;const y=f.target;y.hasPointerCapture(f.pointerId)&&y.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(g(f),f.preventDefault())}),onKeyDown:A(a.onKeyDown,f=>{const y=w.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&C(f.key),!(y&&f.key===" ")&&So.includes(f.key)&&(g(),f.preventDefault())})})})});ze.displayName=Ke;var Ge="SelectValue",Ye=n.forwardRef((o,r)=>{const{__scopeSelect:t,className:s,style:a,children:d,placeholder:i="",...l}=o,c=J(Ge,t),{onValueNodeHasChildrenChange:u}=c,v=d!==void 0,w=W(r,c.onValueNodeChange);return q(()=>{u(v)},[u,v]),e.jsx(O.span,{...l,ref:w,style:{pointerEvents:"none"},children:ht(c.value)?e.jsx(e.Fragment,{children:i}):d})});Ye.displayName=Ge;var Io="SelectIcon",qe=n.forwardRef((o,r)=>{const{__scopeSelect:t,children:s,...a}=o;return e.jsx(O.span,{"aria-hidden":!0,...a,ref:r,children:s||"▼"})});qe.displayName=Io;var Po="SelectPortal",Je=o=>e.jsx(Ht,{asChild:!0,...o});Je.displayName=Po;var te="SelectContent",Ze=n.forwardRef((o,r)=>{const t=J(te,o.__scopeSelect),[s,a]=n.useState();if(q(()=>{a(new DocumentFragment)},[]),!t.open){const d=s;return d?Ve.createPortal(e.jsx(Xe,{scope:o.__scopeSelect,children:e.jsx(pe.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),d):null}return e.jsx(Qe,{...o,ref:r})});Ze.displayName=te;var V=10,[Xe,Z]=re(te),Eo="SelectContentImpl",Ro=fo("SelectContent.RemoveScroll"),Qe=n.forwardRef((o,r)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:d,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:v,arrowPadding:w,collisionBoundary:C,collisionPadding:_,sticky:g,hideWhenDetached:f,avoidCollisions:y,...S}=o,m=J(te,t),[h,M]=n.useState(null),[p,T]=n.useState(null),b=W(r,x=>M(x)),[N,j]=n.useState(null),[k,U]=n.useState(null),F=fe(t),[G,$]=n.useState(!1),K=n.useRef(!1);n.useEffect(()=>{if(h)return Wt(h)},[h]),Ut();const D=n.useCallback(x=>{const[R,...L]=F().map(P=>P.ref.current),[E]=L.slice(-1),I=document.activeElement;for(const P of x)if(P===I||(P==null||P.scrollIntoView({block:"nearest"}),P===R&&p&&(p.scrollTop=0),P===E&&p&&(p.scrollTop=p.scrollHeight),P==null||P.focus(),document.activeElement!==I))return},[F,p]),H=n.useCallback(()=>D([N,h]),[D,N,h]);n.useEffect(()=>{G&&H()},[G,H]);const{onOpenChange:z,triggerPointerDownPosRef:Y}=m;n.useEffect(()=>{if(h){let x={x:0,y:0};const R=E=>{var I,P;x={x:Math.abs(Math.round(E.pageX)-(((I=Y.current)==null?void 0:I.x)??0)),y:Math.abs(Math.round(E.pageY)-(((P=Y.current)==null?void 0:P.y)??0))}},L=E=>{x.x<=10&&x.y<=10?E.preventDefault():h.contains(E.target)||z(!1),document.removeEventListener("pointermove",R),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",R),document.addEventListener("pointerup",L,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",L,{capture:!0})}}},[h,z,Y]),n.useEffect(()=>{const x=()=>z(!1);return window.addEventListener("blur",x),window.addEventListener("resize",x),()=>{window.removeEventListener("blur",x),window.removeEventListener("resize",x)}},[z]);const[he,ce]=xt(x=>{const R=F().filter(I=>!I.disabled),L=R.find(I=>I.ref.current===document.activeElement),E=gt(R,x,L);E&&setTimeout(()=>E.ref.current.focus())}),xe=n.useCallback((x,R,L)=>{const E=!K.current&&!L;(m.value!==void 0&&m.value===R||E)&&(j(x),E&&(K.current=!0))},[m.value]),ge=n.useCallback(()=>h==null?void 0:h.focus(),[h]),oe=n.useCallback((x,R,L)=>{const E=!K.current&&!L;(m.value!==void 0&&m.value===R||E)&&U(x)},[m.value]),ie=s==="popper"?Ne:et,ne=ie===Ne?{side:l,sideOffset:c,align:u,alignOffset:v,arrowPadding:w,collisionBoundary:C,collisionPadding:_,sticky:g,hideWhenDetached:f,avoidCollisions:y}:{};return e.jsx(Xe,{scope:t,content:h,viewport:p,onViewportChange:T,itemRefCallback:xe,selectedItem:N,onItemLeave:ge,itemTextRefCallback:oe,focusSelectedItem:H,selectedItemText:k,position:s,isPositioned:G,searchRef:he,children:e.jsx(Ft,{as:Ro,allowPinchZoom:!0,children:e.jsx($t,{asChild:!0,trapped:m.open,onMountAutoFocus:x=>{x.preventDefault()},onUnmountAutoFocus:A(a,x=>{var R;(R=m.trigger)==null||R.focus({preventScroll:!0}),x.preventDefault()}),children:e.jsx(Kt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:i,onFocusOutside:x=>x.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:e.jsx(ie,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:x=>x.preventDefault(),...S,...ne,onPlaced:()=>$(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:A(S.onKeyDown,x=>{const R=x.ctrlKey||x.altKey||x.metaKey;if(x.key==="Tab"&&x.preventDefault(),!R&&x.key.length===1&&ce(x.key),["ArrowUp","ArrowDown","Home","End"].includes(x.key)){let E=F().filter(I=>!I.disabled).map(I=>I.ref.current);if(["ArrowUp","End"].includes(x.key)&&(E=E.slice().reverse()),["ArrowUp","ArrowDown"].includes(x.key)){const I=x.target,P=E.indexOf(I);E=E.slice(P+1)}setTimeout(()=>D(E)),x.preventDefault()}})})})})})})});Qe.displayName=Eo;var _o="SelectItemAlignedPosition",et=n.forwardRef((o,r)=>{const{__scopeSelect:t,onPlaced:s,...a}=o,d=J(te,t),i=Z(te,t),[l,c]=n.useState(null),[u,v]=n.useState(null),w=W(r,b=>v(b)),C=fe(t),_=n.useRef(!1),g=n.useRef(!0),{viewport:f,selectedItem:y,selectedItemText:S,focusSelectedItem:m}=i,h=n.useCallback(()=>{if(d.trigger&&d.valueNode&&l&&u&&f&&y&&S){const b=d.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),j=d.valueNode.getBoundingClientRect(),k=S.getBoundingClientRect();if(d.dir!=="rtl"){const I=k.left-N.left,P=j.left-I,X=b.left-P,Q=b.width+X,ve=Math.max(Q,N.width),ye=window.innerWidth-V,we=De(P,[V,Math.max(V,ye-ve)]);l.style.minWidth=Q+"px",l.style.left=we+"px"}else{const I=N.right-k.right,P=window.innerWidth-j.right-I,X=window.innerWidth-b.right-P,Q=b.width+X,ve=Math.max(Q,N.width),ye=window.innerWidth-V,we=De(P,[V,Math.max(V,ye-ve)]);l.style.minWidth=Q+"px",l.style.right=we+"px"}const U=C(),F=window.innerHeight-V*2,G=f.scrollHeight,$=window.getComputedStyle(u),K=parseInt($.borderTopWidth,10),D=parseInt($.paddingTop,10),H=parseInt($.borderBottomWidth,10),z=parseInt($.paddingBottom,10),Y=K+D+G+z+H,he=Math.min(y.offsetHeight*5,Y),ce=window.getComputedStyle(f),xe=parseInt(ce.paddingTop,10),ge=parseInt(ce.paddingBottom,10),oe=b.top+b.height/2-V,ie=F-oe,ne=y.offsetHeight/2,x=y.offsetTop+ne,R=K+D+x,L=Y-R;if(R<=oe){const I=U.length>0&&y===U[U.length-1].ref.current;l.style.bottom="0px";const P=u.clientHeight-f.offsetTop-f.offsetHeight,X=Math.max(ie,ne+(I?ge:0)+P+H),Q=R+X;l.style.height=Q+"px"}else{const I=U.length>0&&y===U[0].ref.current;l.style.top="0px";const X=Math.max(oe,K+f.offsetTop+(I?xe:0)+ne)+L;l.style.height=X+"px",f.scrollTop=R-oe+f.offsetTop}l.style.margin=`${V}px 0`,l.style.minHeight=he+"px",l.style.maxHeight=F+"px",s==null||s(),requestAnimationFrame(()=>_.current=!0)}},[C,d.trigger,d.valueNode,l,u,f,y,S,d.dir,s]);q(()=>h(),[h]);const[M,p]=n.useState();q(()=>{u&&p(window.getComputedStyle(u).zIndex)},[u]);const T=n.useCallback(b=>{b&&g.current===!0&&(h(),m==null||m(),g.current=!1)},[h,m]);return e.jsx(Mo,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:_,onScrollButtonChange:T,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:e.jsx(O.div,{...a,ref:w,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});et.displayName=_o;var Ao="SelectPopperPosition",Ne=n.forwardRef((o,r)=>{const{__scopeSelect:t,align:s="start",collisionPadding:a=V,...d}=o,i=me(t);return e.jsx(Yt,{...i,...d,ref:r,align:s,collisionPadding:a,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ne.displayName=Ao;var[Mo,Ae]=re(te,{}),Ce="SelectViewport",tt=n.forwardRef((o,r)=>{const{__scopeSelect:t,nonce:s,...a}=o,d=Z(Ce,t),i=Ae(Ce,t),l=W(r,d.onViewportChange),c=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),e.jsx(pe.Slot,{scope:t,children:e.jsx(O.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:A(a.onScroll,u=>{const v=u.currentTarget,{contentWrapper:w,shouldExpandOnScrollRef:C}=i;if(C!=null&&C.current&&w){const _=Math.abs(c.current-v.scrollTop);if(_>0){const g=window.innerHeight-V*2,f=parseFloat(w.style.minHeight),y=parseFloat(w.style.height),S=Math.max(f,y);if(S<g){const m=S+_,h=Math.min(g,m),M=m-h;w.style.height=h+"px",w.style.bottom==="0px"&&(v.scrollTop=M>0?M:0,w.style.justifyContent="flex-end")}}}c.current=v.scrollTop})})})]})});tt.displayName=Ce;var ot="SelectGroup",[ko,Do]=re(ot),Oo=n.forwardRef((o,r)=>{const{__scopeSelect:t,...s}=o,a=Ee();return e.jsx(ko,{scope:t,id:a,children:e.jsx(O.div,{role:"group","aria-labelledby":a,...s,ref:r})})});Oo.displayName=ot;var rt="SelectLabel",nt=n.forwardRef((o,r)=>{const{__scopeSelect:t,...s}=o,a=Do(rt,t);return e.jsx(O.div,{id:a.id,...s,ref:r})});nt.displayName=rt;var ue="SelectItem",[Lo,st]=re(ue),at=n.forwardRef((o,r)=>{const{__scopeSelect:t,value:s,disabled:a=!1,textValue:d,...i}=o,l=J(ue,t),c=Z(ue,t),u=l.value===s,[v,w]=n.useState(d??""),[C,_]=n.useState(!1),g=W(r,m=>{var h;return(h=c.itemRefCallback)==null?void 0:h.call(c,m,s,a)}),f=Ee(),y=n.useRef("touch"),S=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Lo,{scope:t,value:s,disabled:a,textId:f,isSelected:u,onItemTextChange:n.useCallback(m=>{w(h=>h||((m==null?void 0:m.textContent)??"").trim())},[]),children:e.jsx(pe.ItemSlot,{scope:t,value:s,disabled:a,textValue:v,children:e.jsx(O.div,{role:"option","aria-labelledby":f,"data-highlighted":C?"":void 0,"aria-selected":u&&C,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:g,onFocus:A(i.onFocus,()=>_(!0)),onBlur:A(i.onBlur,()=>_(!1)),onClick:A(i.onClick,()=>{y.current!=="mouse"&&S()}),onPointerUp:A(i.onPointerUp,()=>{y.current==="mouse"&&S()}),onPointerDown:A(i.onPointerDown,m=>{y.current=m.pointerType}),onPointerMove:A(i.onPointerMove,m=>{var h;y.current=m.pointerType,a?(h=c.onItemLeave)==null||h.call(c):y.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:A(i.onPointerLeave,m=>{var h;m.currentTarget===document.activeElement&&((h=c.onItemLeave)==null||h.call(c))}),onKeyDown:A(i.onKeyDown,m=>{var M;((M=c.searchRef)==null?void 0:M.current)!==""&&m.key===" "||(No.includes(m.key)&&S(),m.key===" "&&m.preventDefault())})})})})});at.displayName=ue;var se="SelectItemText",lt=n.forwardRef((o,r)=>{const{__scopeSelect:t,className:s,style:a,...d}=o,i=J(se,t),l=Z(se,t),c=st(se,t),u=To(se,t),[v,w]=n.useState(null),C=W(r,S=>w(S),c.onItemTextChange,S=>{var m;return(m=l.itemTextRefCallback)==null?void 0:m.call(l,S,c.value,c.disabled)}),_=v==null?void 0:v.textContent,g=n.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:_},c.value),[c.disabled,c.value,_]),{onNativeOptionAdd:f,onNativeOptionRemove:y}=u;return q(()=>(f(g),()=>y(g)),[f,y,g]),e.jsxs(e.Fragment,{children:[e.jsx(O.span,{id:c.textId,...d,ref:C}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ve.createPortal(d.children,i.valueNode):null]})});lt.displayName=se;var ct="SelectItemIndicator",it=n.forwardRef((o,r)=>{const{__scopeSelect:t,...s}=o;return st(ct,t).isSelected?e.jsx(O.span,{"aria-hidden":!0,...s,ref:r}):null});it.displayName=ct;var be="SelectScrollUpButton",dt=n.forwardRef((o,r)=>{const t=Z(be,o.__scopeSelect),s=Ae(be,o.__scopeSelect),[a,d]=n.useState(!1),i=W(r,s.onScrollButtonChange);return q(()=>{if(t.viewport&&t.isPositioned){let l=function(){const u=c.scrollTop>0;d(u)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),a?e.jsx(pt,{...o,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});dt.displayName=be;var je="SelectScrollDownButton",ut=n.forwardRef((o,r)=>{const t=Z(je,o.__scopeSelect),s=Ae(je,o.__scopeSelect),[a,d]=n.useState(!1),i=W(r,s.onScrollButtonChange);return q(()=>{if(t.viewport&&t.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,v=Math.ceil(c.scrollTop)<u;d(v)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),a?e.jsx(pt,{...o,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});ut.displayName=je;var pt=n.forwardRef((o,r)=>{const{__scopeSelect:t,onAutoScroll:s,...a}=o,d=Z("SelectScrollButton",t),i=n.useRef(null),l=fe(t),c=n.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return n.useEffect(()=>()=>c(),[c]),q(()=>{var v;const u=l().find(w=>w.ref.current===document.activeElement);(v=u==null?void 0:u.ref.current)==null||v.scrollIntoView({block:"nearest"})},[l]),e.jsx(O.div,{"aria-hidden":!0,...a,ref:r,style:{flexShrink:0,...a.style},onPointerDown:A(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:A(a.onPointerMove,()=>{var u;(u=d.onItemLeave)==null||u.call(d),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:A(a.onPointerLeave,()=>{c()})})}),Vo="SelectSeparator",ft=n.forwardRef((o,r)=>{const{__scopeSelect:t,...s}=o;return e.jsx(O.div,{"aria-hidden":!0,...s,ref:r})});ft.displayName=Vo;var Te="SelectArrow",Bo=n.forwardRef((o,r)=>{const{__scopeSelect:t,...s}=o,a=me(t),d=J(Te,t),i=Z(Te,t);return d.open&&i.position==="popper"?e.jsx(qt,{...a,...s,ref:r}):null});Bo.displayName=Te;var Ho="SelectBubbleInput",mt=n.forwardRef(({__scopeSelect:o,value:r,...t},s)=>{const a=n.useRef(null),d=W(s,a),i=Jt(r);return n.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==r&&v){const w=new Event("change",{bubbles:!0});v.call(l,r),l.dispatchEvent(w)}},[i,r]),e.jsx(O.select,{...t,style:{...Fe,...t.style},ref:d,defaultValue:r})});mt.displayName=Ho;function ht(o){return o===""||o===void 0}function xt(o){const r=Ot(o),t=n.useRef(""),s=n.useRef(0),a=n.useCallback(i=>{const l=t.current+i;r(l),function c(u){t.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[r]),d=n.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,a,d]}function gt(o,r,t){const a=r.length>1&&Array.from(r).every(u=>u===r[0])?r[0]:r,d=t?o.indexOf(t):-1;let i=Wo(o,Math.max(d,0));a.length===1&&(i=i.filter(u=>u!==t));const c=i.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==t?c:void 0}function Wo(o,r){return o.map((t,s)=>o[(r+s)%o.length])}var Uo=$e,vt=ze,Fo=Ye,$o=qe,Ko=Je,yt=Ze,zo=tt,wt=nt,St=at,Go=lt,Yo=it,Nt=dt,Ct=ut,bt=ft;const Oe=Uo,Le=Fo,Ie=n.forwardRef(({className:o,children:r,...t},s)=>e.jsxs(vt,{ref:s,className:B("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",o),...t,children:[r,e.jsx($o,{asChild:!0,children:e.jsx(He,{className:"h-4 w-4 opacity-50"})})]}));Ie.displayName=vt.displayName;const jt=n.forwardRef(({className:o,...r},t)=>e.jsx(Nt,{ref:t,className:B("flex cursor-default items-center justify-center py-1",o),...r,children:e.jsx(to,{className:"h-4 w-4"})}));jt.displayName=Nt.displayName;const Tt=n.forwardRef(({className:o,...r},t)=>e.jsx(Ct,{ref:t,className:B("flex cursor-default items-center justify-center py-1",o),...r,children:e.jsx(He,{className:"h-4 w-4"})}));Tt.displayName=Ct.displayName;const Pe=n.forwardRef(({className:o,children:r,position:t="popper",...s},a)=>e.jsx(Ko,{children:e.jsxs(yt,{ref:a,className:B("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t,...s,children:[e.jsx(jt,{}),e.jsx(zo,{className:B("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(Tt,{})]})}));Pe.displayName=yt.displayName;const qo=n.forwardRef(({className:o,...r},t)=>e.jsx(wt,{ref:t,className:B("py-1.5 pl-8 pr-2 text-sm font-semibold",o),...r}));qo.displayName=wt.displayName;const ae=n.forwardRef(({className:o,children:r,...t},s)=>e.jsxs(St,{ref:s,className:B("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Yo,{children:e.jsx(Qt,{className:"h-4 w-4"})})}),e.jsx(Go,{children:r})]}));ae.displayName=St.displayName;const Jo=n.forwardRef(({className:o,...r},t)=>e.jsx(bt,{ref:t,className:B("-mx-1 my-1 h-px bg-muted",o),...r}));Jo.displayName=bt.displayName;function mr(){const[o,r]=n.useState(""),[t,s]=n.useState(""),[a,d]=n.useState(""),[i,l]=n.useState([]),[c,u]=n.useState([]),[v,w]=n.useState([]),[C,_]=n.useState("ALL"),[g,f]=n.useState(""),[y,S]=n.useState("");n.useEffect(()=>{async function p(){try{const N=await fetch(`/api/prompts?category=${encodeURIComponent(C)}`);if(N.ok){const j=await N.json();u(j.prompts),l(j.categories),w(g?j.prompts.filter(k=>k.title.includes(g)||k.content.includes(g)):j.prompts);return}}catch{}const T=_e();u(T),l(Array.from(new Set(T.map(N=>N.category))).sort((N,j)=>N.localeCompare(j)));const b=C==="ALL"?T:T.filter(N=>N.category===C);w(g?b.filter(N=>N.title.includes(g)||N.content.includes(g)):b)}p()},[]),n.useEffect(()=>{async function p(){try{const b=await fetch(`/api/prompts?category=${encodeURIComponent(C)}`);if(b.ok){const N=await b.json();u(N.prompts),l(N.categories),w(g?N.prompts.filter(j=>j.title.includes(g)||j.content.includes(g)):N.prompts);return}}catch{}const T=C==="ALL"?c:c.filter(b=>b.category===C);w(g?T.filter(b=>b.title.includes(g)||b.content.includes(g)):T)}p()},[C]),n.useEffect(()=>{const p=C==="ALL"?c:c.filter(T=>T.category===C);w(g?p.filter(T=>T.title.includes(g)||T.content.includes(g)):p)},[g,c]);async function m(){const p=o.trim();if(!(!p||!t.trim()||!a.trim())){try{if((await fetch("/api/prompts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:p,title:t.trim(),content:a.trim()})})).ok)await M(),S("新增成功"),setTimeout(()=>S(""),2e3);else throw new Error("server")}catch{const T=uo({category:p,title:t.trim(),content:a.trim()});u(b=>{const N=[T,...b];return l(Array.from(new Set(N.map(j=>j.category))).sort((j,k)=>j.localeCompare(k))),N}),S("已保存到本地"),setTimeout(()=>S(""),2e3)}s(""),d("")}}async function h(p){try{if((await fetch(`/api/prompts?id=${encodeURIComponent(p)}`,{method:"DELETE"})).ok){await M(),S("删除成功"),setTimeout(()=>S(""),2e3);return}}catch{}po(p)&&(u(b=>{const N=b.filter(j=>j.id!==p);return l(Array.from(new Set(N.map(j=>j.category))).sort((j,k)=>j.localeCompare(k))),N}),S("已从本地删除"),setTimeout(()=>S(""),2e3))}async function M(){try{const p=await fetch(`/api/prompts?category=${encodeURIComponent(C)}`);if(p.ok){const T=await p.json();u(T.prompts),l(T.categories),w(T.prompts)}}catch{}}return e.jsxs("div",{className:"flex-1 w-full bg-background flex min-h-0 h-[calc(100vh-8rem)] border rounded-lg overflow-hidden mt-[5px]",children:[e.jsxs("div",{className:"w-[300px] border-r bg-muted/10 flex flex-col shrink-0",children:[e.jsx("div",{className:"h-12 px-4 border-b flex items-center justify-between bg-muted/30",children:e.jsxs("span",{className:"font-medium text-sm flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"新增提示词"]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs text-muted-foreground font-medium",children:"分类"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(Oe,{value:i.includes(o)?o:o?"__NEW__":"",onValueChange:p=>{r(p!=="__NEW__"?p:"")},children:[e.jsx(Ie,{className:"h-8 text-[13px]",children:e.jsx(Le,{placeholder:"选择分类"})}),e.jsxs(Pe,{children:[i.map(p=>e.jsx(ae,{value:p,children:p},p)),e.jsx(ae,{value:"__NEW__",children:"+ 新建分类"})]})]}),e.jsx(Se,{value:o,onChange:p=>r(p.target.value),className:"h-8 text-[13px]",placeholder:"输入分类名称"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs text-muted-foreground font-medium",children:"标题"}),e.jsx(Se,{value:t,onChange:p=>s(p.target.value),className:"h-8 text-[13px]",placeholder:"提示词标题"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs text-muted-foreground font-medium",children:"内容"}),e.jsx(Pt,{value:a,onChange:p=>d(p.target.value),rows:10,className:"resize-none text-[13px]",placeholder:"输入完整提示词内容..."})]}),e.jsxs(de,{size:"sm",className:"w-full h-8 text-[13px]",onClick:m,children:[e.jsx(so,{className:"w-3.5 h-3.5 mr-2"}),"保存提示词"]}),y&&e.jsx(We,{className:"py-2",children:e.jsx(Ue,{className:"text-xs text-center",children:y})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"h-12 px-4 border-b flex items-center justify-between bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium text-sm",children:"提示词库"}),e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",v.length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3 w-[400px]",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(lo,{className:"absolute left-2.5 top-2.5 h-3.5 w-3.5 text-muted-foreground"}),e.jsx(Se,{type:"search",placeholder:"搜索提示词...",className:"w-full h-8 pl-8 text-[13px] bg-background",value:g,onChange:p=>f(p.target.value)})]}),e.jsxs(Oe,{value:C,onValueChange:_,children:[e.jsx(Ie,{className:"w-[140px] h-8 text-[13px]",children:e.jsx(Le,{placeholder:"全部分类"})}),e.jsxs(Pe,{children:[e.jsx(ae,{value:"ALL",children:"全部分类"}),i.map(p=>e.jsx(ae,{value:p,children:p},p))]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-0",children:v.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[300px] text-muted-foreground",children:[e.jsx(ke,{className:"w-12 h-12 mb-4 opacity-20"}),e.jsx("p",{className:"text-sm",children:"暂无提示词，请在左侧添加"})]}):e.jsx("div",{className:"divide-y",children:v.map(p=>e.jsxs("div",{className:"p-4 flex items-start justify-between gap-4 hover:bg-muted/30 transition-colors group",children:[e.jsxs("div",{className:"space-y-1 min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-semibold text-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",children:p.category}),e.jsx("h4",{className:"font-medium text-sm truncate",children:p.title})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 leading-relaxed",children:p.content})]}),e.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(de,{variant:"outline",size:"icon",className:"h-7 w-7",title:"复制内容",onClick:()=>{navigator.clipboard.writeText(p.content),S("内容已复制"),setTimeout(()=>S(""),2e3)},children:e.jsx(ro,{className:"w-3.5 h-3.5"})}),e.jsxs(Et,{children:[e.jsx(Rt,{asChild:!0,children:e.jsx(de,{variant:"outline",size:"sm",className:"h-7 px-2 text-xs",children:"查看"})}),e.jsxs(_t,{className:"sm:max-w-[640px]",children:[e.jsx(At,{children:e.jsx(Mt,{children:p.title})}),e.jsx("div",{className:"mt-4 p-4 bg-muted/30 rounded-md text-sm whitespace-pre-wrap max-h-[60vh] overflow-y-auto font-mono",children:p.content})]})]}),e.jsx(de,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive hover:bg-destructive/10",title:"删除",onClick:()=>h(p.id),children:e.jsx(Zt,{className:"w-3.5 h-3.5"})})]})]},p.id))})})]})]})}export{mr as default};
